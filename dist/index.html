<!-- 
============================================================================
JobTracker - Single File Build
Generated: 2025-06-22T12:25:36.051Z
============================================================================
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>JobTracker - Free Local Job Tracker | No Login, No Tracking, Your Data Stays Private</title>
    <meta name="description" content="100% free job application tracker that works locally in your browser. No login required, no data tracking, no servers. Your job search data stays completely private on your device.">
    <meta name="keywords" content="free job tracker, local job application tracker, private job search, no login job tracker, offline job tracker, privacy-first job applications, no tracking career management, local storage job search">
    <meta name="author" content="JobTracker Team">
    <meta name="robots" content="index, follow">
    <meta name="language" content="en">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="JobTracker - Free Local Job Tracker (No Login Required)">
    <meta property="og:description" content="Track job applications privately in your browser. 100% free, no login, no tracking, your data never leaves your device.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://letanure.github.io/job-tracker-plain/">
    <meta property="og:site_name" content="JobTracker">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="JobTracker - Private Job Application Tracker">
    <meta name="twitter:description" content="Free local job tracker with complete privacy. No login, no tracking, your job search data stays on your device.">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://letanure.github.io/job-tracker-plain/">
    
    <!-- Additional Meta Tags -->
    <meta name="theme-color" content="#2383e2">
    <meta name="application-name" content="JobTracker">
    <meta name="apple-mobile-web-app-title" content="JobTracker">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <!-- External Resources -->
    <script defer src="https://cloud.umami.is/script.js" data-website-id="33179b8a-4bc4-4489-9a2d-82d5699c3dfb"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    
    <style>

/* ============================================================================ */
/* SRC/STYLES.CSS */
/* ============================================================================ */

:root {
	/* ============================================================================ */
	/* BASE COLOR PALETTE */
	/* ============================================================================ */
	/* 
     * This section defines the core color palette using a systematic approach:
     * - Each color family has 9 shades (50-900) for maximum flexibility
     * - 50-100: Very light backgrounds, subtle borders
     * - 200-300: Light backgrounds, borders  
     * - 400-500: Medium colors, primary actions (500 is the main color)
     * - 600-700: Darker variants, hover states
     * - 800-900: Very dark, text on light backgrounds
     */

	/* Base whites and blacks */
	--white: #ffffff;
	--black: #000000;
	--white-overlay: rgba(255, 255, 255, 0.95);
	--black-overlay: rgba(0, 0, 0, 0.5);
	--modal-backdrop: rgba(55, 53, 47, 0.15);

	/* Primary brand color - Blue */
	--blue-50: #f0f7ff;
	--blue-100: #e0efff;
	--blue-200: #c7e2ff;
	--blue-300: #a5d0ff;
	--blue-400: #7db8ff;
	--blue-500: #2383e2; /* Primary blue */
	--blue-600: #1a6bc9;
	--blue-700: #1557a8;
	--blue-800: #134489;
	--blue-900: #0f3460;

	/* Neutral grays */
	--gray-50: #fafafa;
	--gray-100: #f5f5f4;
	--gray-200: #e9e9e7;
	--gray-300: #d4d4d2;
	--gray-400: #9b9a97;
	--gray-500: #787774;
	--gray-600: #37352f;
	--gray-700: #2d2b26;
	--gray-800: #1f1e1a;
	--gray-900: #0f0f0c;

	/* Success green */
	--green-50: #f0fdf4;
	--green-100: #ecfdf5;
	--green-200: #d6f5d6;
	--green-300: #a8e6a8;
	--green-400: #7dd87d;
	--green-500: #0f7b0f; /* Primary green */
	--green-600: #0d6f0d;
	--green-700: #0b5d0b;
	--green-800: #094a09;
	--green-900: #063906;

	/* Warning orange */
	--orange-50: #fef7f0;
	--orange-100: #fef3e2;
	--orange-200: #fed7aa;
	--orange-300: #fdba74;
	--orange-400: #fb923c;
	--orange-500: #ff6b35; /* Primary orange */
	--orange-600: #e85a2e;
	--orange-700: #c44a26;
	--orange-800: #a03a1f;
	--orange-900: #7c2d12;

	/* Error red */
	--red-50: #fef2f2;
	--red-100: #fee2e2;
	--red-200: #fecaca;
	--red-300: #fca5a5;
	--red-400: #f87171;
	--red-500: #e03e3e; /* Primary red */
	--red-600: #d13a3a;
	--red-700: #b91c1c;
	--red-800: #991b1b;
	--red-900: #7f1d1d;

	/* Purple for interview status */
	--purple-50: #f1f3ff;
	--purple-100: #ede9fe;
	--purple-200: #ddd6fe;
	--purple-300: #c4b5fd;
	--purple-400: #a78bfa;
	--purple-500: #6366f1; /* Primary purple */
	--purple-600: #5b21b6;
	--purple-700: #4c1d95;
	--purple-800: #3730a3;
	--purple-900: #312e81;

	/* Teal for offer status */
	--teal-50: #f0fdfa;
	--teal-100: #ccfbf1;
	--teal-200: #99f6e4;
	--teal-300: #5eead4;
	--teal-400: #2dd4bf;
	--teal-500: #059669; /* Primary teal */
	--teal-600: #047857;
	--teal-700: #065f46;
	--teal-800: #064e3b;
	--teal-900: #064e3b;

	/* ============================================================================ */
	/* SEMANTIC COLOR SYSTEM */
	/* ============================================================================ */
	/*
     * This section maps the base colors to semantic meanings.
     * Use these semantic colors throughout the application instead of 
     * referencing base colors directly. This allows for easy theming
     * and consistent color usage across components.
     */

	/* Core semantic colors */
	--primary-color: var(--blue-500);
	--primary-hover: var(--blue-600);
	--primary-light: var(--blue-400);
	--primary-bg: var(--blue-50);

	--success-color: var(--green-500);
	--success-hover: var(--green-600);
	--success-light: var(--green-400);
	--success-bg: var(--green-50);

	--warning-color: var(--orange-500);
	--warning-hover: var(--orange-600);
	--warning-light: var(--orange-400);
	--warning-bg: var(--orange-50);

	--error-color: var(--red-500);
	--error-hover: var(--red-600);
	--error-light: var(--red-400);
	--error-bg: var(--red-50);

	--danger-color: var(--red-500);
	--danger-dark: var(--red-600);
	--success-dark: var(--green-600);

	--info-color: var(--primary-color);
	--info-hover: var(--primary-hover);
	--info-light: var(--primary-light);
	--info-bg: var(--primary-bg);

	/* ============================================================================ */
	/* SURFACE & TEXT COLORS */
	/* ============================================================================ */

	/* Background surfaces */
	--background-color: var(--gray-50);
	--container-background: var(--white);
	--surface-elevated: var(--white);
	--surface-overlay: var(--white-overlay);

	/* Borders */
	--border-color: var(--gray-200);
	--border-light: var(--gray-100);
	--border-strong: var(--gray-300);

	/* Text hierarchy */
	--text-color: var(--gray-600);
	--text-light: var(--gray-500);
	--text-lighter: var(--gray-400);
	--text-on-primary: var(--white);
	--text-on-dark: var(--white);

	/* ============================================================================ */
	/* APPLICATION-SPECIFIC COLOR MAPPINGS */
	/* ============================================================================ */

	/* Job status colors */
	--status-wishlist-bg: var(--gray-100);
	--status-wishlist-text: var(--text-light);

	--status-applied-bg: var(--blue-100);
	--status-applied-text: var(--primary-color);

	--status-screening-bg: var(--orange-100);
	--status-screening-text: var(--warning-color);

	--status-interview-bg: var(--purple-50);
	--status-interview-text: var(--purple-500);

	--status-final-bg: var(--green-100);
	--status-final-text: var(--success-color);

	--status-offer-bg: var(--teal-100);
	--status-offer-text: var(--teal-500);

	--status-rejected-bg: var(--red-100);
	--status-rejected-text: var(--error-color);

	--status-withdrawn-bg: var(--gray-100);
	--status-withdrawn-text: var(--gray-500);

	/* Priority colors */
	--priority-high: var(--error-color);
	--priority-medium: var(--warning-color);
	--priority-low: var(--success-color);

	/* Task/note specific colors */
	--next-task-bg: var(--warning-bg);
	--next-task-text: var(--warning-color);

	/* ============================================================================ */
	/* ENHANCED COLOR UTILITIES */
	/* ============================================================================ */

	/* Gradient system */
	--gradient-primary: linear-gradient(
		135deg,
		var(--primary-color),
		var(--primary-hover)
	);
	--gradient-success: linear-gradient(
		135deg,
		var(--success-color),
		var(--success-hover)
	);
	--gradient-warning: linear-gradient(
		135deg,
		var(--warning-color),
		var(--warning-hover)
	);
	--gradient-error: linear-gradient(
		135deg,
		var(--error-color),
		var(--error-hover)
	);

	/* Hover states for better interaction feedback */
	--surface-hover: var(--gray-50);
	--surface-active: var(--gray-100);

	/* Status indicator variations */
	--status-positive: var(--success-color);
	--status-neutral: var(--gray-400);
	--status-negative: var(--error-color);
	--status-pending: var(--warning-color);
	--status-info: var(--info-color);

	/* ============================================================================ */
	/* DESIGN SYSTEM BASE VALUES - Change these to scale the entire system       */
	/* ============================================================================ */

	/* SINGLE SOURCE OF TRUTH - Change this one value to scale everything */
	--base-size: 4px; /* Master scale unit - everything derives from this */

	/* Core base values - calculated from master base-size */
	--base-font-size: 1rem; /* Typography base - scales all fonts */
	--base-line-height: 1.5; /* Line height base - scales all line heights */
	--base-letter-spacing: 0.025em; /* Letter spacing base - scales all letter spacing */
	--base-space-unit: var(--base-size); /* Spacing base - scales all spacing/padding/margins */
	--base-radius-unit: calc(var(--base-size) / 2); /* Border radius base - scales all radius values */
	--base-shadow-blur: calc(var(--base-size) / 2); /* Shadow base - scales all shadow blur values */
	--base-border-width: calc(var(--base-size) / 4); /* Border base - scales all border widths */
	--base-icon-size: calc(var(--base-size) * 4); /* Icon base - scales all icon sizes */
	--base-button-height: calc(var(--base-size) * 8); /* Button base - scales all button heights */

	/* Typography system */
	--font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI",
		Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji",
		"Segoe UI Symbol";

	/* Font sizes - calc-based from base */
	--font-size-base: var(--base-font-size);
	--font-size-2xs: calc(var(--base-font-size) * 0.625); /* 10px */
	--font-size-xs: calc(var(--base-font-size) * 0.75); /* 12px */
	--font-size-sm: calc(var(--base-font-size) * 0.875); /* 14px */
	--font-size-lg: calc(var(--base-font-size) * 1.125); /* 18px */
	--font-size-xl: calc(var(--base-font-size) * 1.25); /* 20px */
	--font-size-2xl: calc(var(--base-font-size) * 1.5); /* 24px */
	--font-size-3xl: calc(var(--base-font-size) * 1.875); /* 30px */

	/* Line heights - calc-based from base */
	--line-height-none: 1;
	--line-height-tight: calc(var(--base-line-height) * 0.833); /* 1.25 */
	--line-height-snug: calc(var(--base-line-height) * 0.917); /* 1.375 */
	--line-height-normal: var(--base-line-height); /* 1.5 */
	--line-height-relaxed: calc(var(--base-line-height) * 1.083); /* 1.625 */
	--line-height-loose: calc(var(--base-line-height) * 1.333); /* 2.0 */

	/* Letter spacing - calc-based from base */
	--letter-spacing-tighter: calc(var(--base-letter-spacing) * -2); /* -0.05em */
	--letter-spacing-tight: calc(var(--base-letter-spacing) * -1); /* -0.025em */
	--letter-spacing-normal: 0;
	--letter-spacing-wide: var(--base-letter-spacing); /* 0.025em */
	--letter-spacing-wider: calc(var(--base-letter-spacing) * 2); /* 0.05em */
	--letter-spacing-widest: calc(var(--base-letter-spacing) * 4); /* 0.1em */

	/* Font weights */
	--font-weight-thin: 100;
	--font-weight-light: 300;
	--font-weight-normal: 400;
	--font-weight-medium: 500;
	--font-weight-semibold: 600;
	--font-weight-bold: 700;
	--font-weight-extrabold: 800;

	/* Spacing system - calc-based from base unit */
	--space-1: var(--base-space-unit); /* 4px */
	--space-2: calc(var(--base-space-unit) * 2); /* 8px */
	--space-3: calc(var(--base-space-unit) * 3); /* 12px */
	--space-4: calc(var(--base-space-unit) * 4); /* 16px */
	--space-5: calc(var(--base-space-unit) * 5); /* 20px */
	--space-6: calc(var(--base-space-unit) * 6); /* 24px */
	--space-8: calc(var(--base-space-unit) * 8); /* 32px */
	--space-10: calc(var(--base-space-unit) * 10); /* 40px */
	--space-12: calc(var(--base-space-unit) * 12); /* 48px */
	--space-16: calc(var(--base-space-unit) * 16); /* 64px */
	--space-20: calc(var(--base-space-unit) * 20); /* 80px */
	--space-24: calc(var(--base-space-unit) * 24); /* 96px */

	/* Grid column system - calc-based from base unit × 2 */
	--col-1: calc(var(--base-space-unit) * 2); /* 8px */
	--col-2: calc(var(--base-space-unit) * 4); /* 16px */
	--col-3: calc(var(--base-space-unit) * 6); /* 24px */
	--col-4: calc(var(--base-space-unit) * 8); /* 32px */
	--col-5: calc(var(--base-space-unit) * 10); /* 40px */
	--col-6: calc(var(--base-space-unit) * 12); /* 48px */
	--col-8: calc(var(--base-space-unit) * 16); /* 64px */
	--col-10: calc(var(--base-space-unit) * 20); /* 80px */
	--col-12: calc(var(--base-space-unit) * 24); /* 96px */
	--col-16: calc(var(--base-space-unit) * 32); /* 128px */
	--col-20: calc(var(--base-space-unit) * 40); /* 160px */
	--col-24: calc(var(--base-space-unit) * 48); /* 192px */
	--col-28: calc(var(--base-space-unit) * 56); /* 224px */
	--col-32: calc(var(--base-space-unit) * 64); /* 256px */
	--col-36: calc(var(--base-space-unit) * 72); /* 288px */
	--col-40: calc(var(--base-space-unit) * 80); /* 320px */
	--col-48: calc(var(--base-space-unit) * 96); /* 384px */
	--col-56: calc(var(--base-space-unit) * 112); /* 448px */
	--col-64: calc(var(--base-space-unit) * 128); /* 512px */

	/* Padding system - calc-based combinations */
	--padding-xs: var(--space-1) var(--space-2); /* 4px 8px */
	--padding-sm: calc(var(--space-1) + calc(var(--base-size) / 2)) var(--space-3); /* 6px 12px */
	--padding-md: var(--space-2) var(--space-4); /* 8px 16px */
	--padding-lg: var(--space-3) var(--space-5); /* 12px 20px */
	--padding-xl: var(--space-4) var(--space-6); /* 16px 24px */

	/* Border radius system - calc-based from base */
	--radius-xs: var(--base-radius-unit); /* 2px */
	--radius-sm: calc(var(--base-radius-unit) * 2); /* 4px */
	--radius-md: calc(var(--base-radius-unit) * 3); /* 6px */
	--radius-lg: calc(var(--base-radius-unit) * 4); /* 8px */
	--radius-xl: calc(var(--base-radius-unit) * 6); /* 12px */
	--radius-full: calc(var(--base-size) * 2500); /* 9999px equivalent */

	/* Shadow system - calc-based from base blur */
	--shadow-xs: 0 var(--base-shadow-blur) calc(var(--base-shadow-blur) * 2)
		rgba(0, 0, 0, 0.04);
	--shadow-sm: 0 var(--base-shadow-blur) calc(var(--base-shadow-blur) * 1) 0
		rgba(0, 0, 0, 0.05);
	--shadow-md: 0 calc(var(--base-shadow-blur) * 2)
		calc(var(--base-shadow-blur) * 3) calc(var(--base-shadow-blur) * -0.5)
		rgba(0, 0, 0, 0.1), 0 var(--base-shadow-blur)
		calc(var(--base-shadow-blur) * 2) calc(var(--base-shadow-blur) * -0.5)
		rgba(0, 0, 0, 0.06);
	--shadow-lg: 0 calc(var(--base-shadow-blur) * 5)
		calc(var(--base-shadow-blur) * 7.5) calc(var(--base-shadow-blur) * -1.5)
		rgba(0, 0, 0, 0.1), 0 calc(var(--base-shadow-blur) * 2)
		calc(var(--base-shadow-blur) * 3) calc(var(--base-shadow-blur) * -1)
		rgba(0, 0, 0, 0.05);
	--shadow-xl: 0 calc(var(--base-shadow-blur) * 10)
		calc(var(--base-shadow-blur) * 12.5) calc(var(--base-shadow-blur) * -2.5)
		rgba(0, 0, 0, 0.1), 0 calc(var(--base-shadow-blur) * 5)
		calc(var(--base-shadow-blur) * 5) calc(var(--base-shadow-blur) * -2.5)
		rgba(0, 0, 0, 0.04);

	/* Border system - calc-based from base */
	--border-width: var(--base-border-width); /* 1px */
	--border-width-thick: calc(var(--base-border-width) * 2); /* 2px */
	--border-width-thicker: calc(var(--base-border-width) * 3); /* 3px */

	/* Icon system - calc-based from base */
	--icon-xs: calc(var(--base-icon-size) * 0.75); /* 12px */
	--icon-sm: calc(var(--base-icon-size) * 0.875); /* 14px */
	--icon-md: var(--base-icon-size); /* 16px */
	--icon-lg: calc(var(--base-icon-size) * 1.25); /* 20px */
	--icon-xl: calc(var(--base-icon-size) * 1.5); /* 24px */

	/* Button system - calc-based from base */
	--btn-height-sm: calc(var(--base-button-height) * 0.875); /* 28px */
	--btn-height-md: var(--base-button-height); /* 32px */
	--btn-height-lg: calc(var(--base-button-height) * 1.25); /* 40px */
	--btn-min-width: calc(var(--base-button-height) * 2.5); /* 80px */

	/* Layout constraints - calc-based where possible */
	--max-width-container: calc(var(--base-size) * 300); /* 1200px */
	--max-width-notes: var(--col-32); /* 256px */
	--max-height-table: 75vh;

	/* Animation & Transition */
	--transition-fast: 0.15s ease;
	--transition-normal: 0.3s ease;
	--transition-slow: 0.5s ease;

	/* Focus ring - calc-based from base-size */
	--focus-ring-width: calc(var(--base-size) * 0.75); /* 3px */
	--focus-ring: 0 0 0 var(--focus-ring-width)
		color-mix(in srgb, var(--primary-color) 10%, transparent);
	--focus-ring-error: 0 0 0 var(--focus-ring-width)
		color-mix(in srgb, var(--error-color) 10%, transparent);
	--focus-ring-success: 0 0 0 var(--focus-ring-width)
		color-mix(in srgb, var(--success-color) 10%, transparent);

	/* Focus ring fallbacks for older browsers */
	--focus-ring-fallback: 0 0 0 var(--focus-ring-width) rgba(35, 131, 226, 0.1);
	--focus-ring-error-fallback: 0 0 0 var(--focus-ring-width)
		rgba(224, 62, 62, 0.1);
	--focus-ring-success-fallback: 0 0 0 var(--focus-ring-width)
		rgba(15, 123, 15, 0.1);

	/* Z-index scale - calc-based */
	--z-dropdown: calc(var(--base-size) * 25); /* 100 */
	--z-modal: calc(var(--base-size) * 250); /* 1000 */
	--z-tooltip: calc(var(--base-size) * 500); /* 2000 */

	/* Component-specific calc-based values */
	--priority-dot-size: calc(var(--base-size) * 2); /* 8px */
	--counter-height: calc(var(--base-size) * 6); /* 24px - consistent height for badges */
	--action-btn-size: calc(var(--base-size) * 8); /* 32px - consistent size for action buttons */
}

/* Base font size for rem calculations */
html {
	font-size: calc(var(--base-size) * 4); /* 16px - 1rem = 16px */
}

body {
	font-family: var(--font-family);
	margin: 0;
	padding: var(--space-6);
	background-color: var(--background-color);
	font-size: var(--font-size-base);
	line-height: var(--line-height-normal);
	color: var(--text-color);
}

.container {
	max-width: var(--max-width-container);
	margin: 0 auto;
	background: var(--container-background);
	border-radius: var(--radius-xl);
	box-shadow: var(--shadow-lg);
	border: var(--border-width) solid var(--border-light);
	overflow: hidden;
}

.header {
	background: var(--container-background);
	border-bottom: var(--border-width) solid var(--border-color);
	padding: var(--space-8) var(--space-6);
	display: flex;
	align-items: center;
	justify-content: space-between;
}

.header h1 {
	margin: 0;
	font-size: var(--font-size-2xl);
	font-weight: 700;
	color: var(--text-color);
	letter-spacing: -0.025em;
}

.controls {
	padding: var(--space-6);
	background: var(--container-background);
	border-bottom: var(--border-width) solid var(--border-color);
	display: flex;
	gap: var(--space-3);
	align-items: center;
}

button {
	background: var(--background-color);
	color: var(--text-color);
	border: var(--border-width) solid var(--border-color);
	padding: var(--padding-sm);
	border-radius: var(--radius-md);
	cursor: pointer;
	font-size: var(--font-size-base);
	font-weight: 500;
	display: inline-flex;
	align-items: center;
	gap: var(--space-2);
	transition: var(--transition-fast);
	box-shadow: var(--shadow-sm);
	height: var(--btn-height-md);
	min-width: var(--btn-min-width);
}

button:hover {
	background: var(--container-background);
	border-color: var(--text-light);
	box-shadow: var(--shadow-md);
	transform: translateY(-1px);
}

button:active {
	transform: translateY(0);
	box-shadow: var(--shadow-sm);
}

.filter-select {
	padding: var(--padding-xs);
	border: var(--border-width) solid var(--border-color);
	border-radius: var(--radius-md);
	font-size: var(--font-size-base);
	background: var(--container-background);
	color: var(--text-color);
}

.table-container {
	overflow-x: auto;
	max-height: var(--max-height-table);
	overflow-y: auto;
	background: var(--container-background);
}

table {
	width: 100%;
	border-collapse: separate;
	border-spacing: 0;
	font-size: var(--font-size-sm); /* Small font for table content - 14px */
}

th {
	background: var(--background-color);
	position: sticky;
	top: 0;
	z-index: var(--z-dropdown);
	padding: var(--space-3) var(--space-2);
	text-align: left;
	font-weight: var(--font-weight-semibold);
	border-bottom: var(--border-width) solid var(--border-color);
	white-space: nowrap;
	color: var(--text-color);
	text-transform: uppercase;
	letter-spacing: var(--letter-spacing-wide);
	/* Inherits font-size from table */
}

.header-with-filter {
	position: relative;
	display: flex;
	align-items: center;
	gap: var(--space-1);
}

.filter-dropdown-icon {
	cursor: pointer;
	font-size: var(--font-size-sm);
	color: var(--text-light);
	user-select: none;
}

.filter-dropdown-icon:hover {
	color: var(--primary-color);
}

.filter-dropdown {
	display: none;
	position: absolute;
	top: 100%;
	left: 0;
	background: var(--container-background);
	border: var(--border-width) solid var(--border-color);
	border-radius: var(--radius-md);
	box-shadow: var(--shadow-md);
	z-index: var(--z-modal);
	min-width: var(--col-16); /* 128px - closer to 150px but systematic */
}

.dropdown-option {
	padding: var(--space-2) var(--space-3);
	cursor: pointer;
	font-size: var(--font-size-base);
	font-weight: normal;
}

.dropdown-option:hover {
	background: var(--background-color);
}

.dropdown-option:first-child {
	border-top-left-radius: var(--border-radius-medium);
	border-top-right-radius: var(--border-radius-medium);
}

.dropdown-option:last-child {
	border-bottom-left-radius: var(--border-radius-medium);
	border-bottom-right-radius: var(--border-radius-medium);
}

td {
	padding: var(--space-3) var(--space-2);
	border-bottom: var(--border-width) solid var(--border-light);
	vertical-align: middle;
	background: var(--container-background);
	font-weight: var(--font-weight-normal);
	color: var(--text-color);
	/* Inherits font-size from table */
}

tr {
	transition: var(--transition-fast);
}

tr:hover {
	background-color: var(--background-color);
	box-shadow: var(--shadow-xs);
}

tbody tr {
	border-radius: var(--radius-md);
}

.status {
	padding: var(--padding-xs);
	border-radius: var(--radius-full);
	font-size: var(--font-size-xs);
	font-weight: 600;
	text-align: center;
	white-space: nowrap;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	min-width: var(--btn-min-width);
	height: var(--counter-height); /* Consistent height for all badges */
	text-transform: capitalize;
	letter-spacing: 0.025em;
}

.status-wishlist {
	background: var(--status-wishlist-bg);
	color: var(--status-wishlist-text);
}
.status-applied {
	background: var(--status-applied-bg);
	color: var(--status-applied-text);
}
.status-phone_screening {
	background: var(--status-screening-bg);
	color: var(--status-screening-text);
}
.status-interview {
	background: var(--status-interview-bg);
	color: var(--status-interview-text);
}
.status-final_round {
	background: var(--status-final-bg);
	color: var(--status-final-text);
}
.status-offer {
	background: var(--status-offer-bg);
	color: var(--status-offer-text);
}
.status-rejected {
	background: var(--status-rejected-bg);
	color: var(--status-rejected-text);
}
.status-withdrawn {
	background: var(--status-withdrawn-bg);
	color: var(--status-withdrawn-text);
}

.priority {
	width: calc(var(--priority-dot-size) + calc(var(--base-size) / 2)); /* 10px */
	height: calc(var(--priority-dot-size) + calc(var(--base-size) / 2)); /* 10px */
	border-radius: var(--radius-full);
	display: inline-block;
	margin-right: var(--space-2);
	box-shadow: var(--shadow-sm);
}

.priority-cell {
	white-space: nowrap;
	display: flex;
	align-items: center;
	height: 100%;
	min-height: var(--col-6); /* 48px */
}

.priority-high {
	background: var(--priority-high);
}
.priority-medium {
	background: var(--priority-medium);
}
.priority-low {
	background: var(--priority-low);
}

.company-name {
	font-weight: var(--font-weight-semibold);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: var(--col-28); /* 224px */
}

.position-name {
	font-weight: var(--font-weight-semibold);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: var(--col-24); /* 192px */
}

.current-phase {
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: var(--col-20); /* 160px */
}

.next-task {
	background: var(--next-task-bg);
	padding: var(--padding-xs);
	border-radius: var(--radius-sm);
	font-size: var(--font-size-xs);
	color: var(--next-task-text);
	font-weight: 500;
}

/* .salary - using default td styles */

/* .location - using default td styles */

.notes {
	max-width: var(--max-width-notes);
	word-wrap: break-word;
}

.contact {
	line-height: var(--line-height-normal);
}

.date {
	white-space: nowrap;
	color: var(--text-light);
	font-variant-numeric: tabular-nums;
}

.editable {
	background: transparent;
	border: var(--border-width) solid transparent;
	width: 100%;
	padding: var(--space-2);
	font-size: inherit;
	font-family: inherit;
	border-radius: var(--radius-sm);
	transition: var(--transition-fast);
}

.editable:focus {
	background: var(--container-background);
	border: var(--border-width) solid var(--primary-color);
	outline: none;
	box-shadow: var(--focus-ring);
}

.stats {
	display: flex;
	gap: var(--space-8);
	padding: var(--space-6);
	background: var(--background-color);
	border-top: var(--border-width) solid var(--border-color);
	font-size: var(--font-size-base);
	justify-content: center;
}

.stat-item {
	display: flex;
	flex-direction: column;
	align-items: center;
	min-width: var(--btn-min-width);
}

.stat-number {
	font-size: var(--font-size-xl);
	font-weight: 700;
	color: var(--text-color);
	margin-bottom: var(--space-1);
}

.stat-label {
	color: var(--text-light);
	font-size: var(--font-size-sm);
	font-weight: 500;
	text-align: center;
}

.actions-cell {
	display: flex;
	gap: var(--space-1);
	align-items: center;
	justify-content: flex-end;
}

.action-btn {
	padding: var(--space-1);
	background: transparent; /* Ghost button style */
	border: none; /* Remove border for ghost style */
	border-radius: var(--radius-sm);
	cursor: pointer;
	font-size: var(--font-size-base);
	display: inline-flex;
	align-items: center;
	justify-content: center;
	transition: var(--transition-fast);
	min-width: var(--action-btn-size);
	height: var(--action-btn-size);
	color: var(--text-lighter); /* More subtle default color */
}

.action-btn:hover {
	background: var(--background-color); /* Subtle background on hover */
	color: var(--text-color); /* Darker color on hover */
	box-shadow: none; /* No shadow for ghost buttons */
	transform: none; /* No transform for subtle effect */
}

.edit-btn .material-symbols-outlined {
	color: var(--primary-color);
}

.edit-btn:hover .material-symbols-outlined {
	color: var(--primary-hover);
}

.delete-btn .material-symbols-outlined {
	color: var(--error-color);
}

.delete-btn:hover .material-symbols-outlined {
	color: var(--error-light);
}

.material-symbols-outlined {
	font-size: var(--icon-lg) !important;
	vertical-align: middle;
}

.cancel-btn {
	background: var(--text-light);
	color: var(--text-on-dark);
}

.cancel-btn:hover {
	background: var(--text-lighter);
}

/* Common textarea styles */
.contact-textarea,
.notes-textarea {
	width: 100%;
	resize: vertical;
	font-size: var(--font-size-base);
	padding: var(--space-1);
	border: var(--border-width) solid var(--border-color);
	border-radius: var(--radius-sm);
	font-family: inherit;
	transition: var(--transition-fast);
}

.contact-textarea {
	min-height: calc(var(--base-size) * 10); /* 40px */
}

.notes-textarea {
	min-height: calc(var(--base-size) * 15); /* 60px */
}

/* Modern Modal Styles */
.modal-overlay {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: var(--modal-backdrop);
	backdrop-filter: blur(5px);
	display: flex;
	justify-content: center;
	align-items: center;
	z-index: var(--z-modal);
	animation: fadeIn var(--transition-fast);
}

@keyframes fadeIn {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

.modal {
	background: var(--container-background);
	border-radius: var(--radius-xl);
	box-shadow: var(--shadow-xl);
	border: var(--border-width) solid var(--border-color);
	max-width: var(--col-64); /* 512px - closer to 640px but systematic */
	width: 90%;
	max-height: 85vh;
	overflow: hidden;
	display: flex;
	flex-direction: column;
	animation: slideUp var(--transition-fast);
}

@keyframes slideUp {
	from {
		opacity: 0;
		transform: translateY(16px) scale(0.98);
	}
	to {
		opacity: 1;
		transform: translateY(0) scale(1);
	}
}

.modal-header {
	padding: var(--space-6) var(--space-6) var(--space-4);
	border-bottom: var(--border-width) solid var(--border-color);
	display: flex;
	justify-content: space-between;
	align-items: center;
	background: var(--container-background);
}

.modal-title {
	font-size: var(--font-size-xl);
	font-weight: 700;
	margin: 0;
	color: var(--text-color);
	letter-spacing: -0.025em;
}

.modal-close {
	background: transparent; /* Ghost button style for modal close */
	border: none; /* Remove border */
	cursor: pointer;
	padding: var(--space-2);
	border-radius: var(--radius-md);
	color: var(--text-light);
	font-size: var(--font-size-xl);
	width: var(--action-btn-size);
	height: var(--action-btn-size);
	display: flex;
	align-items: center;
	justify-content: center;
	transition: var(--transition-fast);
}

.modal-close:hover {
	background: var(--background-color); /* Subtle background on hover */
	color: var(--text-color);
	transform: none; /* No transform for subtle effect */
}

.modal-body {
	padding: var(--space-4) var(--space-6);
	overflow-y: auto;
	flex: 1;
}

.modal-footer {
	padding: var(--space-4) var(--space-6) var(--space-6);
	border-top: var(--border-width) solid var(--border-color);
	display: flex;
	gap: var(--space-3);
	justify-content: flex-end;
	background: var(--container-background);
}

.modal-footer .action-btn {
	padding: var(--padding-sm);
	font-size: var(--font-size-base);
	min-width: calc(var(--base-size) * 24); /* 96px - closer to 100px but systematic */
	font-weight: 600;
}

/* Modern Notes and Tasks Counters */
.notes-count {
	background: var(--background-color);
	color: var(--text-color);
	border: var(--border-width) solid var(--border-color);
	padding: calc(var(--base-size) / 2) var(--space-1); /* 2px */
	border-radius: var(--radius-full);
	font-size: var(--font-size-2xs);
	font-weight: var(--font-weight-semibold);
	cursor: pointer;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: var(--space-1);
	transition: var(--transition-fast);
	box-shadow: var(--shadow-sm);
	min-width: var(--space-5); /* 20px */
	height: var(--counter-height); /* Consistent height for all badges */
	text-align: center;
}

.notes-count:hover {
	background: var(--container-background);
	border-color: var(--text-light);
	transform: scale(1.05);
	box-shadow: var(--shadow-md);
}

/* Common zero state for counters - no special styling */
.notes-count.zero,
.tasks-count.zero {
	/* Inherits regular counter styling */
}

/* Common item card styles */
.note-item,
.task-item {
	border: var(--border-width) solid var(--border-color);
	border-radius: var(--radius-lg);
	padding: var(--space-4);
	margin-bottom: var(--space-3);
	background: var(--container-background);
	transition: var(--transition-fast);
}

.note-item:hover,
.task-item:hover {
	box-shadow: var(--shadow-sm);
	border-color: var(--border-color);
}

.note-item:last-child,
.task-item:last-child {
	margin-bottom: 0;
}

.note-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: var(--space-2);
	font-size: var(--font-size-xs);
	color: var(--text-light);
}

.note-date {
	font-weight: 500;
	font-variant-numeric: tabular-nums;
}

.note-phase {
	background: var(--status-interview-bg);
	color: var(--status-interview-text);
	padding: var(--space-1) var(--space-2);
	border-radius: var(--radius-sm);
	font-size: var(--font-size-xs);
	font-weight: 600;
	text-transform: capitalize;
}

/* Common text content styles */
.note-text,
.task-text {
	font-size: var(--font-size-base);
	line-height: var(--line-height-normal);
	white-space: pre-wrap;
	color: var(--text-color);
}

.note-form {
	display: flex;
	flex-direction: column;
	gap: var(--space-4);
}

.note-form textarea {
	width: 100%;
	min-height: calc(var(--base-size) * 24); /* 96px - closer to 100px but systematic */
	padding: var(--space-4);
	border: var(--border-width) solid var(--border-color);
	border-radius: var(--radius-lg);
	font-size: var(--font-size-base);
	font-family: inherit;
	resize: vertical;
	transition: var(--transition-fast);
	background: var(--container-background);
}

.note-form textarea:focus {
	outline: none;
	border-color: var(--primary-color);
	box-shadow: var(--focus-ring);
}

/* Common form info styles */
.note-form-info,
.task-form-info {
	display: flex;
	gap: var(--space-5);
	font-size: var(--font-size-xs);
	color: var(--text-light);
}

.note-form-info span,
.task-form-info span {
	display: flex;
	align-items: center;
	gap: var(--space-1);
}

.notes-btn .material-symbols-outlined {
	color: var(--primary-color);
}

.notes-btn:hover .material-symbols-outlined {
	color: var(--primary-hover);
}

/* Inline action buttons for notes and tasks */
.edit-note-btn:hover,
.edit-task-btn:hover {
	background: var(--background-color) !important;
	color: var(--primary-color) !important;
}

.archive-btn:hover {
	background: var(--background-color) !important;
	color: var(--text-color) !important;
}

/* Modern Add Note/Task Section */
.add-note-section,
.add-task-section {
	margin-top: var(--space-4);
	border: var(--border-width) solid var(--border-color);
	border-radius: var(--radius-lg);
	padding: var(--space-4);
	background: var(--background-color);
	transition: var(--transition-fast);
}

.add-note-section:hover {
	border-color: var(--primary-color);
	box-shadow: var(--focus-ring);
}

/* Common section titles */
.add-note-title,
.add-task-title {
	font-size: var(--font-size-lg);
	font-weight: 700;
	margin: 0 0 var(--space-3) 0;
	color: var(--text-color);
}

.note-form-info {
	margin-bottom: var(--space-3);
}

.note-form-info span {
	font-weight: 500;
}

.add-note-textarea {
	width: 100%;
	min-height: calc(var(--base-size) * 20); /* 80px */
	padding: var(--space-3);
	border: var(--border-width) solid var(--border-color);
	border-radius: var(--radius-md);
	background: var(--container-background);
	font-size: var(--font-size-base);
	font-family: inherit;
	resize: vertical;
	line-height: 1.5;
	white-space: pre-wrap;
	transition: var(--transition-fast);
}

.add-note-textarea:focus {
	outline: none;
	border-color: var(--primary-color);
	box-shadow: var(--focus-ring);
}

.add-note-textarea::placeholder {
	color: var(--text-lighter);
	font-style: normal;
}

/* Modern Tasks Counter - same as notes counter */
.tasks-count {
	background: var(--background-color);
	color: var(--text-color);
	border: var(--border-width) solid var(--border-color);
	padding: calc(var(--base-size) / 2) var(--space-1); /* 2px */
	border-radius: var(--radius-full);
	font-size: var(--font-size-2xs);
	font-weight: var(--font-weight-semibold);
	cursor: pointer;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: var(--space-1);
	transition: var(--transition-fast);
	box-shadow: var(--shadow-sm);
	min-width: var(--space-5); /* 20px */
	height: var(--counter-height); /* Consistent height for all badges */
	text-align: center;
}

.tasks-count:hover {
	background: var(--container-background);
	border-color: var(--text-light);
	transform: scale(1.05);
	box-shadow: var(--shadow-md);
}

/* Task count badges */
.task-count-todo,
.task-count-in-progress,
.task-count-done {
	font-weight: 700;
	min-width: var(--space-2); /* 8px */
	text-align: center;
}

.task-count-todo {
	color: inherit;
}

.task-count-in-progress {
	color: inherit;
}

.task-count-done {
	color: inherit;
}

.task-count-separator {
	color: var(--text-light);
	font-weight: 400;
}

.task-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: var(--space-2);
	font-size: var(--font-size-xs);
	color: var(--text-light);
}

.task-date {
	font-weight: 500;
}

.task-status {
	padding: calc(var(--base-size) / 2)
		calc(var(--space-1) + calc(var(--base-size) / 2)); /* 2px 6px */
	border-radius: var(--radius-sm);
	font-size: var(--font-size-xs);
	height: var(--counter-height); /* Consistent height */
	display: inline-flex;
	align-items: center;
	text-transform: capitalize;
}

.task-priority {
	color: white;
	padding: calc(var(--base-size) / 2)
		calc(var(--space-1) + calc(var(--base-size) / 2)); /* 2px 6px */
	border-radius: var(--radius-sm);
	font-size: var(--font-size-xs);
	height: var(--counter-height); /* Consistent height */
	display: inline-flex;
	align-items: center;
	text-transform: capitalize;
}

.task-due-date,
.task-completed-date {
	font-size: var(--font-size-xs);
	color: var(--text-light);
	margin-top: var(--space-1);
}

.tasks-btn .material-symbols-outlined {
	color: var(--warning-color);
}

.tasks-btn:hover .material-symbols-outlined {
	color: var(--warning-light);
}

.add-task-section:hover {
	border-color: var(--warning-color);
	box-shadow: color-mix(in srgb, var(--warning-color) 10%, transparent) 0 0 0
		1px;
}

.task-form-info {
	margin-bottom: var(--space-2);
}

.add-task-textarea {
	width: 100%;
	min-height: calc(var(--base-size) * 15); /* 60px */
	padding: 0;
	border: none;
	background: transparent;
	font-size: var(--font-size-base);
	font-family: inherit;
	resize: vertical;
	line-height: 1.4;
	white-space: pre-wrap;
	margin-bottom: var(--space-3);
}

.add-task-textarea:focus {
	outline: none;
}

.add-task-textarea::placeholder {
	color: var(--text-light);
	font-style: italic;
}

.task-form-controls {
	display: flex;
	gap: var(--space-4);
	align-items: end;
}

.task-control-group {
	display: flex;
	flex-direction: column;
	gap: var(--space-1);
}

.task-control-group label {
	font-size: var(--font-size-xs);
	font-weight: 500;
	color: var(--text-light);
}

.add-task-status,
.add-task-priority {
	padding: var(--space-1) var(--space-2);
	border: var(--border-width) solid var(--border-color);
	border-radius: var(--radius-sm);
	font-size: var(--font-size-xs);
	background: var(--container-background);
}

.add-task-due-date {
	padding: var(--space-1) var(--space-2);
	border: var(--border-width) solid var(--border-color);
	border-radius: var(--radius-sm);
	font-size: var(--font-size-xs);
}

/* Inline Edit Components */
.note-edit-textarea,
.task-edit-textarea {
	width: 100%;
	min-height: calc(var(--base-size) * 15); /* 60px */
	padding: var(--space-2);
	border: var(--border-width) solid var(--border-color);
	border-radius: var(--radius-sm);
	font-family: inherit;
	font-size: inherit;
	resize: vertical;
	transition: var(--transition-fast);
}

.edit-save-btn,
.edit-cancel-btn {
	margin-top: var(--space-2);
	padding: var(--space-1) var(--space-2);
	font-size: var(--font-size-xs);
}

.edit-save-btn {
	margin-right: var(--space-2);
}

/* Archive State */
.archived {
	opacity: 0.6;
	filter: grayscale(0.5);
}

/* Modal Content Layout */
.modal-header-content {
	display: flex;
	gap: var(--space-3);
	align-items: center;
}

.modal-content-info {
	display: flex;
	gap: var(--space-3);
	font-size: var(--font-size-xs);
	color: var(--text-light);
}

.modal-actions-row {
	display: flex;
	gap: var(--space-1);
}

.modal-section-header {
	margin-bottom: var(--space-3);
	color: var(--text-color);
	font-size: var(--font-size-base);
	border-bottom: var(--border-width) solid var(--border-color);
	padding-bottom: var(--space-2);
}

.modal-empty-message {
	text-align: center;
	color: var(--text-light);
	margin-bottom: var(--space-5);
}

.modal-archived-header {
	margin-top: var(--space-6);
	margin-bottom: var(--space-3);
	color: var(--text-light);
	font-size: var(--font-size-base);
	border-bottom: var(--border-width) solid var(--border-color);
	padding-bottom: var(--space-2);
	cursor: pointer;
	display: flex;
	align-items: center;
	gap: var(--space-2);
}

.expand-icon {
	font-size: var(--icon-md);
}

/* Task Controls Layout */
.task-controls-row {
	display: flex;
	gap: var(--space-3);
	align-items: center;
	flex-wrap: wrap;
}

.task-header-layout {
	display: flex;
	justify-content: space-between;
	align-items: flex-start;
	margin-bottom: var(--space-2);
	font-size: var(--font-size-xs);
	color: var(--text-light);
}

/* Icon Buttons */
.icon-btn-transparent {
	padding: var(--space-1);
	font-size: var(--icon-sm);
	background: transparent;
	border: none;
	cursor: pointer;
	color: var(--text-lighter); /* More subtle */
	border-radius: var(--radius-xs);
	transition: var(--transition-fast);
	width: var(--action-btn-size); /* Consistent size */
	height: var(--action-btn-size); /* Consistent size */
	display: inline-flex;
	align-items: center;
	justify-content: center;
}

/* Material Icons Sizing */
.icon-14 {
	font-size: var(--icon-md) !important;
}

.icon-16 {
	font-size: var(--icon-md) !important;
}

/* ============================================================================
   INLINE EDITING STYLES
   ============================================================================ */

/* Row in editing mode */
tr.editing {
	background: var(--background-color) !important;
}

tr.editing td {
	padding: var(--space-2);
	vertical-align: middle;
}

/* Inline edit inputs */
.inline-edit {
	width: 100%;
	padding: var(--space-2);
	border: var(--border-width) solid var(--border-color);
	border-radius: var(--radius-sm);
	background: var(--container-background);
	font-size: var(--font-size-sm);
	font-family: inherit;
	transition: var(--transition-fast);
}

.inline-edit:focus {
	outline: none;
	border-color: var(--primary-color);
	box-shadow: var(--focus-ring);
}

/* Inline edit selects */
select.inline-edit {
	cursor: pointer;
	appearance: none;
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
	background-repeat: no-repeat;
	background-position: right var(--space-2) center;
	padding-right: var(--space-6);
}

/* Priority select specific styling */
.priority-select {
	min-width: calc(var(--base-size) * 24); /* 96px - closer to 100px but systematic */
}

/* Phase select specific styling */
.phase-select {
	min-width: calc(var(--base-size) * 32); /* 128px - closer to 140px but systematic */
}

/* Save and Cancel buttons */
.save-btn,
.cancel-btn {
	padding: var(--space-1);
	min-width: var(--action-btn-size); /* 32px - consistent with action buttons */
	height: var(--action-btn-size); /* 32px - consistent with action buttons */
	display: inline-flex;
	align-items: center;
	justify-content: center;
	border: none; /* Ghost button style */
	border-radius: var(--radius-sm);
	transition: var(--transition-fast);
}

.save-btn {
	background: var(--success-color);
	color: white;
}

.save-btn:hover {
	background: var(--success-dark);
}

.cancel-btn {
	background: var(--danger-color);
	color: white;
}

.cancel-btn:hover {
	background: var(--danger-dark);
}

/* Actions cell in edit mode */
tr.editing .actions-cell {
	white-space: nowrap;
}

tr.editing .actions-cell button {
	margin: 0 var(--space-1);
}

/* ============================================================================
   FOOTER STYLES
   ============================================================================ */

.footer {
	margin-top: var(--space-6);
	padding: var(--space-4) 0;
	border-top: var(--border-width) solid var(--border-color);
	background: var(--background-color);
}

.footer-content {
	text-align: center;
}

.footer-text {
	margin: 0 0 var(--space-3) 0;
	color: var(--text-light);
	font-size: var(--font-size-sm);
}

.heart {
	color: var(--error-color);
	display: inline-block;
	animation: heartbeat 1.5s ease-in-out infinite;
}

@keyframes heartbeat {
	0% {
		transform: scale(1);
	}
	14% {
		transform: scale(1.1);
	}
	28% {
		transform: scale(1);
	}
	42% {
		transform: scale(1.1);
	}
	70% {
		transform: scale(1);
	}
}

.author-link {
	color: var(--primary-color);
	text-decoration: none;
	font-weight: 500;
	transition: var(--transition-fast);
}

.author-link:hover {
	color: var(--primary-hover);
	text-decoration: underline;
}

.github-link {
	display: inline-flex;
	align-items: center;
	gap: var(--space-2);
	padding: var(--space-2) var(--space-3);
	color: var(--text-light);
	text-decoration: none;
	font-size: var(--font-size-sm);
	border-radius: var(--radius-md);
	transition: var(--transition-fast);
}

.github-link:hover {
	color: var(--text-color);
	background: var(--container-background);
	transform: translateY(-1px);
}

.github-icon {
	display: inline-block;
	vertical-align: middle;
	transition: var(--transition-fast);
}

.github-link:hover .github-icon {
	transform: scale(1.1);
}

.github-text {
	font-weight: 500;
	letter-spacing: 0.01em;
}

@media (max-width: calc(var(--base-size) * 120)) {
	/* 480px */
	.footer-text {
		font-size: var(--font-size-xs);
	}

	.github-text {
		display: none;
	}
}

/* Make footer stick to bottom on short content */
body {
	min-height: 100vh;
	display: flex;
	flex-direction: column;
}

.container {
	flex: 1;
}

    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 id="appTitle">...</h1>
        </div>
        
        <div class="controls">
            <button id="addAppBtn" onclick="addRow()">...</button>
        </div>
        
        <div class="table-container">
            <table id="jobTable">
                <thead>
                    <tr>
                        <th>
                            <div class="header-with-filter">
                                <span id="priorityHeader">...</span>
                                <span class="filter-dropdown-icon" onclick="toggleDropdown('priorityDropdown')">▼</span>
                                <div class="filter-dropdown" id="priorityDropdown"></div>
                            </div>
                        </th>
                        <th id="companyHeader">...</th>
                        <th id="positionHeader">...</th>
                        <th>
                            <div class="header-with-filter">
                                <span id="currentPhaseHeader">...</span>
                                <span class="filter-dropdown-icon" onclick="toggleDropdown('phaseDropdown')">▼</span>
                                <div class="filter-dropdown" id="phaseDropdown"></div>
                            </div>
                        </th>
                        <th id="contactPersonHeader">...</th>
                        <th id="salaryRangeHeader">...</th>
                        <th id="locationHeader">...</th>
                        <th id="notesHeader">...</th>
                        <th id="tasksHeader">...</th>
                        <th id="actionsHeader">...</th>
                    </tr>
                </thead>
                <tbody id="jobTableBody">
                </tbody>
            </table>
        </div>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="totalApps">0</div>
                <div class="stat-label" id="totalAppsLabel">...</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="activeApps">0</div>
                <div class="stat-label" id="activeAppsLabel">...</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="interviews">0</div>
                <div class="stat-label" id="interviewsLabel">...</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="offers">0</div>
                <div class="stat-label" id="offersLabel">...</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="rejections">0</div>
                <div class="stat-label" id="rejectionsLabel">...</div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <p class="footer-text">
                <span id="footerMadeWith">Made with</span> 
                <span class="heart">❤️</span> 
                <span id="footerBy">by</span> 
                <a href="https://github.com/letanure" target="_blank" rel="noopener noreferrer" class="author-link">letanure</a>
            </p>
            <a href="https://github.com/letanure/JobTracker" target="_blank" rel="noopener noreferrer" class="github-link">
                <svg class="github-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
                <span class="github-text">View on GitHub</span>
            </a>
        </div>
    </footer>

    
    <script>
// ============================================================================
// JobTracker - Built from modular source files
// Generated: 2025-06-22T12:25:36.048Z
// ============================================================================

// Show build info in console
console.log("JobTracker - Built at: 2025-06-22T12:25:36.048Z");


// ============================================================================
// SRC/LIB/DOM.JS
// ============================================================================

// ============================================================================
// MINI DOM UTILITY LIBRARY (jQuery-style)
// ============================================================================

// jQuery-style DOM wrapper class
class DOMElement {
	constructor(element) {
		this.element = element;
	}

	// Chainable text method
	text(content) {
		if (content === undefined) {
			return this.element.textContent;
		}
		this.element.textContent = content;
		return this;
	}

	// Chainable html method
	html(content) {
		if (content === undefined) {
			return this.element.innerHTML;
		}
		this.element.innerHTML = content;
		return this;
	}

	// Chainable show/hide methods
	show() {
		this.element.style.display = "block";
		return this;
	}

	hide() {
		this.element.style.display = "none";
		return this;
	}

	toggle() {
		const isVisible = this.element.style.display === "block";
		this.element.style.display = isVisible ? "none" : "block";
		return this;
	}

	// Chainable event method
	on(event, handler) {
		this.element.addEventListener(event, handler);
		return this;
	}

	// Chainable addClass/removeClass
	addClass(className) {
		this.element.classList.add(className);
		return this;
	}

	removeClass(className) {
		this.element.classList.remove(className);
		return this;
	}

	// Chainable attr method
	attr(name, value) {
		if (value === undefined) {
			return this.element.getAttribute(name);
		}
		this.element.setAttribute(name, value);
		return this;
	}

	// Chainable css method
	css(property, value) {
		if (typeof property === "object") {
			Object.assign(this.element.style, property);
		} else if (value === undefined) {
			return getComputedStyle(this.element)[property];
		} else {
			this.element.style[property] = value;
		}
		return this;
	}

	// Append child
	append(child) {
		if (typeof child === "string") {
			this.element.appendChild(document.createTextNode(child));
		} else {
			this.element.appendChild(child);
		}
		return this;
	}

	// Get the raw DOM element
	get() {
		return this.element;
	}
}

// Enhanced $ function with jQuery-style API
const $ = (selector) => {
	if (typeof selector === "string") {
		if (selector.startsWith("#")) {
			// ID selector
			const element = document.getElementById(selector.slice(1));
			return element ? new DOMElement(element) : null;
		} else {
			// CSS selector
			const element = document.querySelector(selector);
			return element ? new DOMElement(element) : null;
		}
	} else if (selector instanceof Element) {
		// Wrap existing element
		return new DOMElement(selector);
	}
	return null;
};

// Static methods for backwards compatibility and utility
Object.assign($, {
	// Get element by ID (returns raw element)
	id: (id) => document.getElementById(id),

	// Query selector (single element)
	qs: (selector) => document.querySelector(selector),

	// Query selector all (multiple elements)
	qsa: (selector) => document.querySelectorAll(selector),

	// Create element with optional class and text
	create: (tag, className, textContent) => {
		const element = document.createElement(tag);
		if (className) element.className = className;
		if (textContent) element.textContent = textContent;
		return element;
	},

	// Add event listener (static)
	on: (element, event, handler) => element.addEventListener(event, handler),

	// Set innerHTML (static)
	html: (element, html) => (element.innerHTML = html),

	// Set textContent (static)
	text: (element, text) => (element.textContent = text),

	// Show/hide element (static)
	show: (element) => (element.style.display = "block"),
	hide: (element) => (element.style.display = "none"),

	// Toggle display (static)
	toggle: (element) => {
		const isVisible = element.style.display === "block";
		element.style.display = isVisible ? "none" : "block";
	},
});

// React-like h function for creating elements
const h = (tag, props = {}, ...children) => {
	const element = document.createElement(tag);

	// Set properties
	for (const [key, value] of Object.entries(props)) {
		if (key === "className") {
			element.className = value;
		} else if (key === "style" && typeof value === "object") {
			Object.assign(element.style, value);
		} else if (key === "innerHTML") {
			element.innerHTML = value;
		} else if (key === "textContent") {
			element.textContent = value;
		} else if (key.startsWith("on") && typeof value === "function") {
			const eventType = key.slice(2).toLowerCase();
			element.addEventListener(eventType, value);
		} else if (key.startsWith("data-")) {
			element.setAttribute(key, value);
		} else {
			element.setAttribute(key, value);
		}
	}

	// Add children
	for (const child of children) {
		if (child !== null && child !== undefined) {
			if (typeof child === "string" || typeof child === "number") {
				element.appendChild(document.createTextNode(child.toString()));
			} else if (child instanceof Node) {
				element.appendChild(child);
			}
		}
	}

	return element;
};

// ============================================================================
// SRC/LIB/STORAGE.JS
// ============================================================================

// ============================================================================
// MINI DATA PERSISTENCE LIBRARY
// ============================================================================

const DataStore = {
	// Storage key for job tracker data
	STORAGE_KEY: "jobTrackerData",

	// Save data to storage
	save: (data) => {
		try {
			localStorage.setItem(DataStore.STORAGE_KEY, JSON.stringify(data));
			return true;
		} catch (error) {
			console.error("Error saving data:", error);
			return false;
		}
	},

	// Load data from storage
	load: () => {
		try {
			const savedData = localStorage.getItem(DataStore.STORAGE_KEY);
			return savedData ? JSON.parse(savedData) : null;
		} catch (error) {
			console.error("Error loading data:", error);
			return null;
		}
	},

	// Check if data exists in storage
	exists: () => {
		return localStorage.getItem(DataStore.STORAGE_KEY) !== null;
	},

	// Clear all data from storage
	clear: () => {
		try {
			localStorage.removeItem(DataStore.STORAGE_KEY);
			return true;
		} catch (error) {
			console.error("Error clearing data:", error);
			return false;
		}
	}
};

// ============================================================================
// SRC/LIB/I18N.JS
// ============================================================================

// ============================================================================
// MINI I18N LIBRARY
// ============================================================================

const I18n = {
	// Current language
	currentLanguage: "en",

	// Language detection from browser
	detectLanguage: () => {
		const browserLang = navigator.language || navigator.userLanguage;
		const langCode = browserLang.split("-")[0];
		return I18n.translations[langCode] ? langCode : "en";
	},

	// Set current language
	setLanguage: (lang) => {
		if (I18n.translations[lang]) {
			I18n.currentLanguage = lang;
			DataStore.save({ ...DataStore.load(), language: lang });
			return true;
		}
		return false;
	},

	// Get translated text
	t: (key, params = {}) => {
		const keys = key.split(".");
		let translation = I18n.translations[I18n.currentLanguage];

		for (const k of keys) {
			translation = translation?.[k];
		}

		if (!translation) {
			console.warn(
				`Translation missing for key: ${key} in language: ${I18n.currentLanguage}`,
			);
			return key;
		}

		// Replace parameters in translation
		return translation.replace(/\{(\w+)\}/g, (match, param) => {
			return params[param] !== undefined ? params[param] : match;
		});
	},

	// Get available languages
	getLanguages: () => Object.keys(I18n.translations),

	// Initialize language from storage or browser
	init: () => {
		const savedData = DataStore.load();
		const savedLanguage = savedData?.language;
		I18n.currentLanguage = savedLanguage || I18n.detectLanguage();
	},
};

// Translation constants
I18n.translations = {
	en: {
		app: {
			title: "JobTracker",
		},
		buttons: {
			addApplication: "+ Add Application",
		},
		table: {
			headers: {
				priority: "Priority",
				company: "Company",
				position: "Position",
				currentPhase: "Current Phase",
				contactPerson: "Contact Person",
				salaryRange: "Salary Range",
				location: "Location",
				notes: "Notes",
				tasks: "Tasks",
				actions: "Actions",
			},
			filters: {
				allPriorities: "All Priorities",
				allPhases: "All Phases",
			},
			placeholders: {
				company: "Company Name",
				position: "Position Title",
				contactPerson: "Contact Name",
				contactEmail: "Contact Email",
				salaryRange: "Salary Range",
				location: "Location",
			},
		},
		priorities: {
			high: "High",
			medium: "Medium",
			low: "Low",
		},
		phases: {
			// PHASES array values
			wishlist: "Wishlist",
			applied: "Applied",
			phone_screening: "Phone Screening",
			interview: "Interview",
			final_round: "Final Round",
			offer: "Offer",
			rejected: "Rejected",
			withdrawn: "Withdrawn",
			// Extended phase values
			applicationReview: "Application Review",
			initialScreening: "Initial Screening",
			hrPhoneScreen: "HR Phone Screen",
			recruiterCall: "Recruiter Call",
			technicalPhoneScreen: "Technical Phone Screen",
			codingChallenge: "Coding Challenge",
			takeHomeAssignment: "Take-home Assignment",
			technicalInterview: "Technical Interview",
			systemDesignInterview: "System Design Interview",
			behavioralInterview: "Behavioral Interview",
			teamInterview: "Team Interview",
			hiringManagerInterview: "Hiring Manager Interview",
			panelInterview: "Panel Interview",
			finalRound: "Final Round",
			referenceCheck: "Reference Check",
			backgroundCheck: "Background Check",
			offerDiscussion: "Offer Discussion",
			salaryNegotiation: "Salary Negotiation",
		},
		stats: {
			totalApplications: "Total Applications",
			active: "Active",
			interviews: "Interviews",
			offers: "Offers",
			rejections: "Rejections",
		},
		messages: {
			welcome:
				"Welcome to JobTracker!\n\nWould you like to see 2 example job applications to understand how the tracker works?\n\nClick OK to add examples, or Cancel to start with an empty tracker.",
			confirmDelete:
				"Are you sure you want to delete the application for {position} at {company}?",
		},
		demo: {
			contactPerson1: "Sarah Chen",
			contactPerson2: "Mike Rodriguez",
			notes1:
				"Great culture fit. Need to research their microservices architecture.",
			notes2: "Early stage startup. High growth potential but risky.",
		},
		seo: {
			title: "JobTracker - Free Local Job Tracker | No Login, No Tracking, Your Data Stays Private",
			description: "100% free job application tracker that works locally in your browser. No login required, no data tracking, no servers. Your job search data stays completely private on your device.",
			keywords: "free job tracker, local job application tracker, private job search, no login job tracker, offline job tracker, privacy-first job applications, no tracking career management, local storage job search",
			author: "JobTracker Team",
			ogTitle: "JobTracker - Free Local Job Tracker (No Login Required)",
			ogDescription: "Track job applications privately in your browser. 100% free, no login, no tracking, your data never leaves your device.",
			twitterTitle: "JobTracker - Private Job Application Tracker",
			twitterDescription: "Free local job tracker with complete privacy. No login, no tracking, your job search data stays on your device.",
		},
		modals: {
			notes: {
				title: "Notes for {position} at {company}",
				activeSection: "Active Notes",
				archivedSection: "Archived Notes ({count})",
				emptyState: "No notes yet. Add your first note below.",
				addSection: "Add New Note",
				phaseLabelPrefix: " Phase: ",
				placeholder: "Enter your note here...",
				editTitle: "Edit note",
				archiveTitle: "Archive note",
				unarchiveTitle: "Unarchive note",
				addButton: "Add Note",
			},
			tasks: {
				title: "Tasks for {position} at {company}",
				activeSection: "Active Tasks",
				archivedSection: "Archived Tasks ({count})",
				emptyState: "No tasks yet. Add your first task below.",
				addSection: "Add New Task",
				placeholder: "Enter your task here...",
				editTitle: "Edit task",
				archiveTitle: "Archive task",
				unarchiveTitle: "Unarchive task",
				addButton: "Add Task",
				statusTodo: "To Do",
				statusInProgress: "In Progress",
				statusDone: "Done",
				priorityLow: "Low",
				priorityMedium: "Medium",
				priorityHigh: "High",
			},
			contacts: {
				title: "Contacts for {position} at {company}",
				activeSection: "Active Contacts",
				archivedSection: "Archived Contacts ({count})",
				emptyState: "No contacts yet. Add your first contact below.",
				addSection: "Add New Contact",
				editTitle: "Edit contact",
				archiveTitle: "Archive contact",
				unarchiveTitle: "Unarchive contact",
				addButton: "Add Contact",
				placeholderName: "Name",
				placeholderEmail: "Email",
				placeholderPhone: "Phone",
				placeholderCompany: "Company",
				noContacts: "No contacts",
				defaultContact: "Contact",
			},
			common: {
				save: "Save",
				cancel: "Cancel",
				close: "Close",
			},
		},
		forms: {
			saveChangesTitle: "Save changes",
			cancelEditingTitle: "Cancel editing",
			noDueDate: "No due date",
			placeholderNameEmail: "Name\nEmail",
		},
		footer: {
			madeWith: "Made with",
			by: "by",
		},
	},
	pt: {
		app: {
			title: "JobTracker",
		},
		buttons: {
			addApplication: "+ Adicionar Candidatura",
		},
		table: {
			headers: {
				priority: "Prioridade",
				company: "Empresa",
				position: "Cargo",
				currentPhase: "Fase Atual",
				contactPerson: "Pessoa de Contato",
				salaryRange: "Faixa Salarial",
				location: "Localização",
				notes: "Notas",
				tasks: "Tarefas",
				actions: "Ações",
			},
			filters: {
				allPriorities: "Todas as Prioridades",
				allPhases: "Todas as Fases",
			},
			placeholders: {
				company: "Nome da Empresa",
				position: "Título do Cargo",
				contactPerson: "Nome do Contato",
				contactEmail: "Email do Contato",
				salaryRange: "Faixa Salarial",
				location: "Localização",
			},
		},
		priorities: {
			high: "Alta",
			medium: "Média",
			low: "Baixa",
		},
		phases: {
			// PHASES array values
			wishlist: "Lista de Desejos",
			applied: "Candidatura Enviada",
			phone_screening: "Triagem por Telefone",
			interview: "Entrevista",
			final_round: "Etapa Final",
			offer: "Oferta",
			rejected: "Rejeitado",
			withdrawn: "Retirado",
			// Extended phase values
			applicationReview: "Análise da Candidatura",
			initialScreening: "Triagem Inicial",
			hrPhoneScreen: "Triagem por Telefone - RH",
			recruiterCall: "Ligação do Recrutador",
			technicalPhoneScreen: "Triagem Técnica por Telefone",
			codingChallenge: "Desafio de Programação",
			takeHomeAssignment: "Tarefa para Casa",
			technicalInterview: "Entrevista Técnica",
			systemDesignInterview: "Entrevista de Design de Sistema",
			behavioralInterview: "Entrevista Comportamental",
			teamInterview: "Entrevista com a Equipe",
			hiringManagerInterview: "Entrevista com Gerente de Contratação",
			panelInterview: "Entrevista em Painel",
			finalRound: "Etapa Final",
			referenceCheck: "Verificação de Referências",
			backgroundCheck: "Verificação de Antecedentes",
			offerDiscussion: "Discussão da Oferta",
			salaryNegotiation: "Negociação Salarial",
		},
		stats: {
			totalApplications: "Total de Candidaturas",
			active: "Ativas",
			interviews: "Entrevistas",
			offers: "Ofertas",
			rejections: "Rejeições",
		},
		messages: {
			welcome:
				"Bem-vindo ao JobTracker!\n\nGostaria de ver 2 exemplos de candidaturas para entender como o rastreador funciona?\n\nClique OK para adicionar exemplos, ou Cancelar para começar com um rastreador vazio.",
			confirmDelete:
				"Tem certeza de que deseja excluir a candidatura para {position} na {company}?",
		},
		demo: {
			contactPerson1: "Sarah Chen",
			contactPerson2: "Mike Rodriguez",
			notes1:
				"Ótimo encaixe cultural. Preciso pesquisar sua arquitetura de microsserviços.",
			notes2:
				"Startup em estágio inicial. Alto potencial de crescimento, mas arriscado.",
		},
		seo: {
			title: "JobTracker - Rastreador Local Gratuito | Sem Login, Sem Rastreamento, Dados Privados",
			description: "Rastreador de candidaturas 100% gratuito que funciona localmente no seu navegador. Sem login necessário, sem rastreamento de dados, sem servidores. Seus dados de busca de emprego ficam completamente privados no seu dispositivo.",
			keywords: "rastreador gratuito de empregos, rastreador local de candidaturas, busca de emprego privada, rastreador sem login, rastreador offline de empregos, candidaturas com privacidade, gestão de carreira sem rastreamento, busca de emprego local",
			author: "Equipe JobTracker",
			ogTitle: "JobTracker - Rastreador Local Gratuito (Sem Login Necessário)",
			ogDescription: "Acompanhe candidaturas de forma privada no seu navegador. 100% gratuito, sem login, sem rastreamento, seus dados nunca saem do seu dispositivo.",
			twitterTitle: "JobTracker - Rastreador Privado de Candidaturas",
			twitterDescription: "Rastreador local gratuito com total privacidade. Sem login, sem rastreamento, seus dados de busca de emprego ficam no seu dispositivo.",
		},
		modals: {
			notes: {
				title: "Notas para {position} na {company}",
				activeSection: "Notas Ativas",
				archivedSection: "Notas Arquivadas ({count})",
				emptyState: "Sem notas ainda. Adicione sua primeira nota abaixo.",
				addSection: "Adicionar Nova Nota",
				phaseLabelPrefix: " Fase: ",
				placeholder: "Digite sua nota aqui...",
				editTitle: "Editar nota",
				archiveTitle: "Arquivar nota",
				unarchiveTitle: "Desarquivar nota",
				addButton: "Adicionar Nota",
			},
			tasks: {
				title: "Tarefas para {position} na {company}",
				activeSection: "Tarefas Ativas",
				archivedSection: "Tarefas Arquivadas ({count})",
				emptyState: "Sem tarefas ainda. Adicione sua primeira tarefa abaixo.",
				addSection: "Adicionar Nova Tarefa",
				placeholder: "Digite sua tarefa aqui...",
				editTitle: "Editar tarefa",
				archiveTitle: "Arquivar tarefa",
				unarchiveTitle: "Desarquivar tarefa",
				addButton: "Adicionar Tarefa",
				statusTodo: "A Fazer",
				statusInProgress: "Em Progresso",
				statusDone: "Concluída",
				priorityLow: "Baixa",
				priorityMedium: "Média",
				priorityHigh: "Alta",
			},
			contacts: {
				title: "Contatos para {position} na {company}",
				activeSection: "Contatos Ativos",
				archivedSection: "Contatos Arquivados ({count})",
				emptyState: "Sem contatos ainda. Adicione seu primeiro contato abaixo.",
				addSection: "Adicionar Novo Contato",
				editTitle: "Editar contato",
				archiveTitle: "Arquivar contato",
				unarchiveTitle: "Desarquivar contato",
				addButton: "Adicionar Contato",
				placeholderName: "Nome",
				placeholderEmail: "Email",
				placeholderPhone: "Telefone",
				placeholderCompany: "Empresa",
				noContacts: "Sem contatos",
				defaultContact: "Contato",
			},
			common: {
				save: "Salvar",
				cancel: "Cancelar",
				close: "Fechar",
			},
		},
		forms: {
			saveChangesTitle: "Salvar alterações",
			cancelEditingTitle: "Cancelar edição",
			noDueDate: "Sem data de vencimento",
			placeholderNameEmail: "Nome\nEmail",
		},
		footer: {
			madeWith: "Feito com",
			by: "por",
		},
	},
};

// ============================================================================
// SRC/UTILS/CONSTANTS.JS
// ============================================================================

// ============================================================================
// CONFIGURATION
// ============================================================================

const CONFIG = {
	dateFormat: "DD/MM/YY HH:MM", // Options: 'DD/MM/YY', 'MM/DD/YY', 'YYYY-MM-DD', 'DD/MM/YY HH:MM'
	showTimeInNotes: true, // Set to true to include time in notes
};

// ============================================================================
// CONSTANTS AND DATA
// ============================================================================

const PRIORITIES = ["high", "medium", "low"];

const PHASES = [
	"wishlist",
	"applied",
	"phone_screening",
	"interview",
	"final_round",
	"offer",
	"rejected",
	"withdrawn",
];

// Helper functions to get translated values
const getPriorityText = (priorityKey) => I18n.t(`priorities.${priorityKey}`);
const getPhaseText = (phaseKey) => I18n.t(`phases.${phaseKey}`);

// Demo data for first-time users
const DEMO_DATA = [
	{
		id: 1,
		priority: "high",
		company: "TechCorp Inc",
		position: "Senior Software Engineer",
		appliedDate: "2025-06-15T10:00:00.000Z",
		currentPhase: "interview",
		contactPerson: "demo.contactPerson1",
		contactEmail: "sarah@techcorp.com",
		salaryRange: "$120k - $150k",
		location: "San Francisco, CA",
		notes: "demo.notes1",
		tasks: [
			{
				id: "1",
				text: "Prepare system design presentation",
				status: "todo",
				priority: "high",
				createdAt: "2025-06-15T10:00:00.000Z",
				completedAt: null,
				dueDate: "2025-06-22T10:00:00.000Z",
			},
			{
				id: "2",
				text: "Review company tech stack",
				status: "done",
				priority: "medium",
				createdAt: "2025-06-14T09:00:00.000Z",
				completedAt: "2025-06-16T14:30:00.000Z",
				dueDate: null,
			},
		],
	},
	{
		id: 2,
		priority: "medium",
		company: "StartupXYZ",
		position: "Full Stack Developer",
		appliedDate: "2025-06-12T09:00:00.000Z",
		currentPhase: "phone_screening",
		contactPerson: "demo.contactPerson2",
		contactEmail: "hiring@startupxyz.com",
		salaryRange: "$90k - $110k + equity",
		location: "Remote",
		notes: "demo.notes2",
		tasks: [
			{
				id: "3",
				text: "Wait for callback",
				status: "in-progress",
				priority: "medium",
				createdAt: "2025-06-12T15:00:00.000Z",
				completedAt: null,
				dueDate: "2025-06-20T17:00:00.000Z",
			},
		],
	},
];

// Helper function to get demo data with translations
const getDemoData = () => {
	return DEMO_DATA.map((job) => ({
		...job,
		contactPerson: job.contactPerson.startsWith("demo.")
			? I18n.t(job.contactPerson)
			: job.contactPerson,
		notes: job.notes.startsWith("demo.") ? [{
			id: Date.now() + Math.random(),
			date: job.appliedDate || new Date().toISOString(),
			phase: job.currentPhase || "applied",
			text: I18n.t(job.notes)
		}] : (Array.isArray(job.notes) ? job.notes : []),
	}));
};

// Global state variables
let jobsData = [];
let originalData = [];

// ============================================================================
// SRC/UTILS/HELPERS.JS
// ============================================================================

// ============================================================================
// UTILITY FUNCTIONS
// ============================================================================

// Format date for display
const formatDate = (dateString) => {
	const date = new Date(dateString);

	// Use CONFIG.dateFormat to determine format
	switch (CONFIG.dateFormat) {
		case "DD/MM/YY":
			return date.toLocaleDateString("en-GB", {
				year: "2-digit",
				month: "2-digit",
				day: "2-digit",
			});
		case "MM/DD/YY":
			return date.toLocaleDateString("en-US", {
				year: "2-digit",
				month: "2-digit",
				day: "2-digit",
			});
		case "YYYY-MM-DD":
			return date.toISOString().split("T")[0];
		case "DD/MM/YY HH:MM":
			return (
				date.toLocaleDateString("en-GB", {
					year: "2-digit",
					month: "2-digit",
					day: "2-digit",
				}) +
				" " +
				date.toLocaleTimeString("en-GB", {
					hour: "2-digit",
					minute: "2-digit",
					hour12: false,
				})
			);
		default:
			// Default to DD/MM/YY format
			return date.toLocaleDateString("en-GB", {
				year: "2-digit",
				month: "2-digit",
				day: "2-digit",
			});
	}
};

function getPhaseClass(phase) {
	return phase.toLowerCase().replace(/\s+/g, "_");
}

function getUniqueValues(array, property) {
	return [...new Set(array.map((item) => item[property]))];
}

function createElement(tag, className, textContent) {
	return $.create(tag, className, textContent);
}

function createOption(value, text, selected = false) {
	const option = createElement("option");
	option.value = value;
	option.textContent = text;
	if (selected) option.selected = true;
	return option;
}

// Helper function for task status text
const getTaskStatusText = (statusKey) => {
	const statusMap = {
		'todo': I18n.t('modals.tasks.statusTodo'),
		'in-progress': I18n.t('modals.tasks.statusInProgress'), 
		'done': I18n.t('modals.tasks.statusDone')
	};
	return statusMap[statusKey] || statusKey;
};

function updateStaticTexts() {
	// Update header
	$("#appTitle").text(I18n.t("app.title"));

	// Update button
	$("#addAppBtn").text(I18n.t("buttons.addApplication"));

	// Update table headers
	$("#priorityHeader").text(I18n.t("table.headers.priority"));
	$("#companyHeader").text(I18n.t("table.headers.company"));
	$("#positionHeader").text(I18n.t("table.headers.position"));
	$("#currentPhaseHeader").text(I18n.t("table.headers.currentPhase"));
	$("#contactPersonHeader").text(I18n.t("table.headers.contactPerson"));
	$("#salaryRangeHeader").text(I18n.t("table.headers.salaryRange"));
	$("#locationHeader").text(I18n.t("table.headers.location"));
	$("#notesHeader").text(I18n.t("table.headers.notes"));
	$("#tasksHeader").text(I18n.t("table.headers.tasks"));
	$("#actionsHeader").text(I18n.t("table.headers.actions"));

	// Update stats labels
	$("#totalAppsLabel").text(I18n.t("stats.totalApplications"));
	$("#activeAppsLabel").text(I18n.t("stats.active"));
	$("#interviewsLabel").text(I18n.t("stats.interviews"));
	$("#offersLabel").text(I18n.t("stats.offers"));
	$("#rejectionsLabel").text(I18n.t("stats.rejections"));

	// Update footer text
	$("#footerMadeWith").text(I18n.t("footer.madeWith"));
	$("#footerBy").text(I18n.t("footer.by"));
}

// ============================================================================
// SRC/UTILS/DATA.JS
// ============================================================================

// ============================================================================
// DATA PERSISTENCE
// ============================================================================

// Save to localStorage
const saveToLocalStorage = () => {
	DataStore.save({
		jobs: jobsData,
		language: I18n.currentLanguage,
	});
};

// Load from localStorage
const loadFromLocalStorage = () => {
	const savedData = DataStore.load();
	
	if (savedData) {
		// Set language first
		if (savedData.language) {
			I18n.setLanguage(savedData.language);
		}
		
		// Load jobs data directly without migration
		if (savedData.jobs && Array.isArray(savedData.jobs)) {
			return savedData.jobs;
		}
	}
	
	return null;
};

// ============================================================================
// SRC/COMPONENTS/NOTES.JS
// ============================================================================

// ============================================================================
// NOTES SYSTEM COMPONENTS
// ============================================================================

// Notes count display component
const NotesCount = ({ notes = [], onClick }) => {
	const activeNotes = notes.filter(note => !note.archived);
	const count = activeNotes.length;
	const className = count === 0 ? "notes-count zero" : "notes-count";

	return h("span", {
		className,
		onclick: onClick, // Always allow clicks to open modal
		textContent: count.toString(),
		title: `${count} active note${count !== 1 ? 's' : ''}${notes.length !== count ? ` (${notes.length - count} archived)` : ''}`
	});
};

// Individual note item component
const NoteItem = ({ note, job }) => {
	const isArchived = note.archived || false;
	
	const handleArchiveToggle = () => {
		const jobIndex = jobsData.findIndex((j) => j.id === job.id);
		if (jobIndex === -1) return;
		
		const noteIndex = jobsData[jobIndex].notes.findIndex((n) => n.id === note.id);
		if (noteIndex === -1) return;
		
		jobsData[jobIndex].notes[noteIndex].archived = !isArchived;
		saveToLocalStorage();
		
		// Update the note element in place
		const noteElement = document.querySelector(`[data-note-id="${note.id}"]`);
		if (noteElement) {
			const newArchiveStatus = !isArchived;
			noteElement.style.opacity = newArchiveStatus ? "0.6" : "1";
			noteElement.style.filter = newArchiveStatus ? "grayscale(0.5)" : "none";
			noteElement.className = `note-item ${newArchiveStatus ? 'archived' : ''}`;
			
			// Update archive button
			const archiveBtn = noteElement.querySelector('.archive-btn');
			if (archiveBtn) {
				archiveBtn.innerHTML = `<span class="material-symbols-outlined icon-14">${newArchiveStatus ? "unarchive" : "archive"}</span>`;
			}
		}
		
		// Update interface
		updateStats();
	};
	
	const handleEdit = () => {
		const noteTextElement = document.querySelector(`[data-note-id="${note.id}"] .note-text`);
		if (!noteTextElement) return;
		
		const currentText = note.text;
		const textarea = h("textarea", {
			className: "note-edit-textarea",
			textContent: currentText
		});
		
		const saveBtn = h("button", {
			className: "action-btn edit-btn edit-save-btn",
			textContent: I18n.t("modals.common.save"),
			onclick: () => {
				const newText = textarea.value.trim();
				if (!newText) return;
				
				const jobIndex = jobsData.findIndex((j) => j.id === job.id);
				if (jobIndex === -1) return;
				
				const noteIndex = jobsData[jobIndex].notes.findIndex((n) => n.id === note.id);
				if (noteIndex === -1) return;
				
				jobsData[jobIndex].notes[noteIndex].text = newText;
				saveToLocalStorage();
				
				// Update in place - replace textarea with new text
				noteTextElement.innerHTML = "";
				noteTextElement.textContent = newText;
				
				// Update interface
				updateStats();
			}
		});
		
		const cancelBtn = h("button", {
			className: "action-btn cancel-btn edit-cancel-btn",
			textContent: I18n.t("modals.common.cancel"),
			onclick: () => {
				// Cancel editing - restore original text
				noteTextElement.innerHTML = "";
				noteTextElement.textContent = note.text;
			}
		});
		
		noteTextElement.innerHTML = "";
		noteTextElement.appendChild(textarea);
		noteTextElement.appendChild(h("div", {}, saveBtn, cancelBtn));
		textarea.focus();
	};
	
	return h(
		"div",
		{ 
			className: `note-item ${isArchived ? 'archived' : ''}`,
			"data-note-id": note.id
		},
		h(
			"div",
			{ 
				className: "note-header"
			},
			h(
				"div",
				{ className: "modal-header-content" },
				h("span", { className: "note-phase" }, getPhaseText(note.phase)),
				h("span", { className: "note-date" }, formatDate(note.date))
			),
			h(
				"div",
				{ className: "note-actions modal-actions-row" },
				h("button", {
					className: "action-btn edit-note-btn icon-btn-transparent",
					title: I18n.t("modals.notes.editTitle"),
					innerHTML: '<span class="material-symbols-outlined icon-14">edit</span>',
					onclick: handleEdit
				}),
				h("button", {
					className: "action-btn archive-btn icon-btn-transparent",
					title: isArchived ? I18n.t("modals.notes.unarchiveTitle") : I18n.t("modals.notes.archiveTitle"),
					innerHTML: `<span class="material-symbols-outlined icon-14">${isArchived ? "unarchive" : "archive"}</span>`,
					onclick: handleArchiveToggle
				})
			)
		),
		h("div", { 
			className: "note-text"
		}, note.text),
	);
};

// Unified modal component for viewing and adding notes
const NotesModal = ({ job, onClose }) => {
	const notes = job.notes || [];
	const activeNotes = notes.filter(note => !note.archived);
	const archivedNotes = notes.filter(note => note.archived);
	const sortedActiveNotes = [...activeNotes].sort(
		(a, b) => new Date(a.date) - new Date(b.date),
	);
	const sortedArchivedNotes = [...archivedNotes].sort(
		(a, b) => new Date(a.date) - new Date(b.date),
	);

	const handleAddNote = () => {
		const textarea = document.querySelector(".add-note-textarea");
		const noteText = textarea.value.trim();

		if (!noteText) {
			textarea.focus();
			return;
		}

		const newNote = {
			id: Date.now(),
			date: new Date().toISOString(),
			phase: job.currentPhase,
			text: noteText,
		};

		// Add note to job data
		const jobIndex = jobsData.findIndex((j) => j.id === job.id);
		if (jobIndex === -1) return;

		if (!jobsData[jobIndex].notes) {
			jobsData[jobIndex].notes = [];
		}

		jobsData[jobIndex].notes.push(newNote);
		saveToLocalStorage();

		// Update the job object for this modal
		job.notes = jobsData[jobIndex].notes;

		// Add the new note to the existing modal without reopening
		const modalBody = document.querySelector(".modal-body");
		const addNoteSection = modalBody.querySelector(".add-note-section");

		// Create and insert the new note before the add note section
		const newNoteElement = NoteItem({ note: newNote, job });
		modalBody.insertBefore(newNoteElement, addNoteSection);

		// Clear the textarea
		textarea.value = "";

		// Update the notes count in the table (refresh interface for count update)
		updateStats();
	};

	return h(
		"div",
		{
			className: "modal-overlay",
			onclick: (e) => e.target === e.currentTarget && onClose(),
		},
		h(
			"div",
			{ className: "modal" },
			h(
				"div",
				{ className: "modal-header" },
				h(
					"h3",
					{ className: "modal-title" },
					I18n.t("modals.notes.title", { position: job.position, company: job.company }),
				),
				h("button", { className: "modal-close", onclick: onClose }, "×"),
			),
			h(
				"div",
				{ className: "modal-body" },
				// Active notes section
				...(sortedActiveNotes.length > 0
					? [
						h("h4", { 
							className: "modal-section-header"
						}, I18n.t("modals.notes.activeSection")),
						...sortedActiveNotes.map((note) => NoteItem({ note, job }))
					]
					: [
							h(
								"p",
								{
									className: "modal-empty-message"
								},
								I18n.t("modals.notes.emptyState"),
							),
						]),
				// Archived notes section
				...(sortedArchivedNotes.length > 0
					? [
						h("h4", { 
							className: "modal-archived-header",
							onclick: () => {
								const archivedSection = document.getElementById('archived-notes-content');
								const expandIcon = document.getElementById('archived-notes-icon');
								if (archivedSection.style.display === 'none') {
									archivedSection.style.display = 'block';
									expandIcon.textContent = 'expand_less';
								} else {
									archivedSection.style.display = 'none';
									expandIcon.textContent = 'expand_more';
								}
							}
						}, 
							h('span', { className: 'material-symbols-outlined expand-icon', id: 'archived-notes-icon' }, 'expand_less'),
							I18n.t("modals.notes.archivedSection", { count: sortedArchivedNotes.length })
						),
						h("div", { 
							id: "archived-notes-content"
						}, ...sortedArchivedNotes.map((note) => NoteItem({ note, job })))
					]
					: []),
				// Add note form section
				h(
					"div",
					{ className: "add-note-section" },
					h("h4", { className: "add-note-title" }, I18n.t("modals.notes.addSection")),
					h(
						"div",
						{ className: "note-form-info" },
						h(
							"span",
							{},
							h(
								"span",
								{ className: "material-symbols-outlined" },
								"assignment",
							),
							I18n.t("modals.notes.phaseLabelPrefix") + getPhaseText(job.currentPhase),
						),
					),
					h("textarea", {
						className: "add-note-textarea",
						placeholder: I18n.t("modals.notes.placeholder"),
						rows: 3,
						onkeydown: (e) => {
							if (e.key === "Enter" && e.shiftKey) {
								e.preventDefault();
								handleAddNote();
							}
						},
					}),
				),
			),
			h(
				"div",
				{ className: "modal-footer" },
				h(
					"button",
					{
						className: "action-btn edit-btn",
						onclick: handleAddNote,
					},
					I18n.t("modals.notes.addButton"),
				),
				h(
					"button",
					{ className: "action-btn cancel-btn", onclick: onClose },
					I18n.t("modals.common.close"),
				),
			),
		),
	);
};

// ============================================================================
// NOTES MANAGEMENT FUNCTIONS
// ============================================================================

// Open unified notes modal (for both viewing and adding notes)
const openNotesModal = (job) => {
	const modal = NotesModal({
		job,
		onClose: closeModal,
	});

	document.body.appendChild(modal);

	// Scroll to bottom to show the add note form
	setTimeout(() => {
		const modalBody = modal.querySelector(".modal-body");
		if (modalBody) {
			modalBody.scrollTop = modalBody.scrollHeight;
		}
	}, 50);
};

// Alias for backward compatibility
const openAddNoteModal = openNotesModal;

// ============================================================================
// SRC/COMPONENTS/TASKS.JS
// ============================================================================

// ============================================================================
// TASKS SYSTEM COMPONENTS
// ============================================================================

// Tasks count display component with colored counters
const TasksCount = ({ tasks = [], onClick }) => {
	const activeTasks = tasks.filter(task => !task.archived);
	const todoCount = activeTasks.filter((task) => task.status === "todo").length;
	const inProgressCount = activeTasks.filter(
		(task) => task.status === "in-progress",
	).length;
	const doneCount = activeTasks.filter((task) => task.status === "done").length;
	const totalActiveCount = activeTasks.length;
	const archivedCount = tasks.length - totalActiveCount;

	const className = totalActiveCount === 0 ? "tasks-count zero" : "tasks-count";

	return h(
		"span",
		{
			className,
			onclick: onClick, // Always allow clicks to open modal
			title: `${totalActiveCount} active task${totalActiveCount !== 1 ? 's' : ''} (${todoCount} todo, ${inProgressCount} in progress, ${doneCount} done)${archivedCount > 0 ? ` + ${archivedCount} archived` : ''}`
		},
		h("span", { className: "task-count-todo" }, todoCount.toString()),
		h("span", { className: "task-count-separator" }, "/"),
		h(
			"span",
			{ className: "task-count-in-progress" },
			inProgressCount.toString(),
		),
		h("span", { className: "task-count-separator" }, "/"),
		h("span", { className: "task-count-done" }, doneCount.toString()),
	);
};

// Individual task item component
const TaskItem = ({ task, job }) => {
	const isArchived = task.archived || false;
	
	const handleArchiveToggle = () => {
		const jobIndex = jobsData.findIndex((j) => j.id === job.id);
		if (jobIndex === -1) return;
		
		const taskIndex = jobsData[jobIndex].tasks.findIndex((t) => t.id === task.id);
		if (taskIndex === -1) return;
		
		jobsData[jobIndex].tasks[taskIndex].archived = !isArchived;
		saveToLocalStorage();
		
		// Update the task element in place
		const taskElement = document.querySelector(`[data-task-id="${task.id}"]`);
		if (taskElement) {
			const newArchiveStatus = !isArchived;
			taskElement.style.opacity = newArchiveStatus ? "0.6" : "1";
			taskElement.style.filter = newArchiveStatus ? "grayscale(0.5)" : "none";
			taskElement.className = `task-item ${newArchiveStatus ? 'archived' : ''}`;
			
			// Update archive button
			const archiveBtn = taskElement.querySelector('.archive-btn');
			if (archiveBtn) {
				archiveBtn.innerHTML = `<span class="material-symbols-outlined icon-14">${newArchiveStatus ? "unarchive" : "archive"}</span>`;
			}
		}
		
		// Update interface
		updateStats();
	};
	
	const handleStatusChange = (newStatus) => {
		const jobIndex = jobsData.findIndex((j) => j.id === job.id);
		if (jobIndex === -1) return;
		
		const taskIndex = jobsData[jobIndex].tasks.findIndex((t) => t.id === task.id);
		if (taskIndex === -1) return;
		
		jobsData[jobIndex].tasks[taskIndex].status = newStatus;
		saveToLocalStorage();
		
		// Update status element in place
		const statusElement = document.querySelector(`[data-task-id="${task.id}"] .task-status`);
		if (statusElement) {
			statusElement.className = `task-status status-${newStatus}`;
			statusElement.textContent = getTaskStatusText(newStatus);
		}
		
		// Update interface
		updateStats();
	};
	
	const handlePriorityChange = (newPriority) => {
		const jobIndex = jobsData.findIndex((j) => j.id === job.id);
		if (jobIndex === -1) return;
		
		const taskIndex = jobsData[jobIndex].tasks.findIndex((t) => t.id === task.id);
		if (taskIndex === -1) return;
		
		jobsData[jobIndex].tasks[taskIndex].priority = newPriority;
		saveToLocalStorage();
		
		// Update priority element in place
		const priorityElement = document.querySelector(`[data-task-id="${task.id}"] .task-priority`);
		if (priorityElement) {
			priorityElement.className = `task-priority priority-${newPriority}`;
			priorityElement.textContent = getPriorityText(newPriority);
		}
		
		// Update interface
		updateStats();
	};
	
	const handleDueDateChange = (newDueDate) => {
		const jobIndex = jobsData.findIndex((j) => j.id === job.id);
		if (jobIndex === -1) return;
		
		const taskIndex = jobsData[jobIndex].tasks.findIndex((t) => t.id === task.id);
		if (taskIndex === -1) return;
		
		jobsData[jobIndex].tasks[taskIndex].dueDate = newDueDate;
		saveToLocalStorage();
		
		// Update due date element in place
		const dueDateElement = document.querySelector(`[data-task-id="${task.id}"] .task-due-date`);
		if (dueDateElement) {
			dueDateElement.textContent = newDueDate ? formatDate(newDueDate) : "No due date";
		}
		
		// Update interface
		updateStats();
	};
	
	const handleEdit = () => {
		const taskTextElement = document.querySelector(`[data-task-id="${task.id}"] .task-text`);
		if (!taskTextElement) return;
		
		const currentText = task.text;
		const textarea = h("textarea", {
			className: "task-edit-textarea",
			textContent: currentText
		});
		
		const saveBtn = h("button", {
			className: "action-btn edit-btn edit-save-btn",
			textContent: I18n.t("modals.common.save"),
			onclick: () => {
				const newText = textarea.value.trim();
				if (!newText) return;
				
				const jobIndex = jobsData.findIndex((j) => j.id === job.id);
				if (jobIndex === -1) return;
				
				const taskIndex = jobsData[jobIndex].tasks.findIndex((t) => t.id === task.id);
				if (taskIndex === -1) return;
				
				jobsData[jobIndex].tasks[taskIndex].text = newText;
				saveToLocalStorage();
				
				// Update in place - replace textarea with new text
				taskTextElement.innerHTML = "";
				taskTextElement.textContent = newText;
				
				// Update interface
				updateStats();
			}
		});
		
		const cancelBtn = h("button", {
			className: "action-btn cancel-btn edit-cancel-btn",
			textContent: I18n.t("modals.common.cancel"),
			onclick: () => {
				// Cancel editing - restore original text
				taskTextElement.innerHTML = "";
				taskTextElement.textContent = task.text;
			}
		});
		
		taskTextElement.innerHTML = "";
		taskTextElement.appendChild(textarea);
		taskTextElement.appendChild(h("div", {}, saveBtn, cancelBtn));
		textarea.focus();
	};
	
	return h(
		"div",
		{ 
			className: `task-item ${isArchived ? 'archived' : ''}`,
			"data-task-id": task.id
		},
		h(
			"div",
			{ 
				className: "task-header task-header-layout"
			},
			h(
				"div",
				{ className: "task-controls-row" },
				h("select", {
					className: "task-status inline-select",
					value: task.status,
					onchange: (e) => handleStatusChange(e.target.value)
				}, 
					h("option", { value: "todo" }, I18n.t("modals.tasks.statusTodo")),
					h("option", { value: "in-progress" }, I18n.t("modals.tasks.statusInProgress")),
					h("option", { value: "done" }, I18n.t("modals.tasks.statusDone"))
				),
				h("select", {
					className: "task-priority inline-select",
					value: task.priority,
					onchange: (e) => handlePriorityChange(e.target.value)
				}, 
					h("option", { value: "low" }, I18n.t("modals.tasks.priorityLow")),
					h("option", { value: "medium" }, I18n.t("modals.tasks.priorityMedium")),
					h("option", { value: "high" }, I18n.t("modals.tasks.priorityHigh"))
				),
				h("input", {
					type: "date",
					className: "task-due-date inline-input",
					value: task.dueDate ? task.dueDate.split('T')[0] : "",
					onchange: (e) => handleDueDateChange(e.target.value ? e.target.value + 'T00:00:00.000Z' : null)
				})
			),
			h(
				"div",
				{ className: "task-actions modal-actions-row" },
				h("button", {
					className: "action-btn edit-task-btn icon-btn-transparent",
					title: I18n.t("modals.tasks.editTitle"),
					innerHTML: '<span class="material-symbols-outlined icon-14">edit</span>',
					onclick: handleEdit
				}),
				h("button", {
					className: "action-btn archive-btn icon-btn-transparent",
					title: isArchived ? I18n.t("modals.tasks.unarchiveTitle") : I18n.t("modals.tasks.archiveTitle"),
					innerHTML: `<span class="material-symbols-outlined icon-14">${isArchived ? "unarchive" : "archive"}</span>`,
					onclick: handleArchiveToggle
				})
			)
		),
		h("div", { 
			className: "task-text"
		}, task.text),
	);
};

// Unified modal component for viewing and adding tasks
const TasksModal = ({ job, onClose }) => {
	const tasks = job.tasks || [];
	const activeTasks = tasks.filter(task => !task.archived);
	const archivedTasks = tasks.filter(task => task.archived);
	const sortedActiveTasks = [...activeTasks].sort(
		(a, b) => new Date(a.createdDate || a.date) - new Date(b.createdDate || b.date),
	);
	const sortedArchivedTasks = [...archivedTasks].sort(
		(a, b) => new Date(a.createdDate || a.date) - new Date(b.createdDate || b.date),
	);

	const handleAddTask = () => {
		const textarea = document.querySelector(".add-task-textarea");
		const taskText = textarea.value.trim();

		if (!taskText) {
			textarea.focus();
			return;
		}

		const newTask = {
			id: Date.now(),
			createdDate: new Date().toISOString(),
			text: taskText,
			status: "todo",
			priority: "medium",
			dueDate: null
		};

		// Add task to job data
		const jobIndex = jobsData.findIndex((j) => j.id === job.id);
		if (jobIndex === -1) return;

		if (!jobsData[jobIndex].tasks) {
			jobsData[jobIndex].tasks = [];
		}

		jobsData[jobIndex].tasks.push(newTask);
		saveToLocalStorage();

		// Update the job object for this modal
		job.tasks = jobsData[jobIndex].tasks;

		// Add the new task to the existing modal without reopening
		const modalBody = document.querySelector(".modal-body");
		const addTaskSection = modalBody.querySelector(".add-task-section");

		// Create and insert the new task before the add task section
		const newTaskElement = TaskItem({ task: newTask, job });
		modalBody.insertBefore(newTaskElement, addTaskSection);

		// Clear the textarea
		textarea.value = "";

		// Update the tasks count in the table (refresh interface for count update)
		updateStats();
	};

	return h(
		"div",
		{
			className: "modal-overlay",
			onclick: (e) => e.target === e.currentTarget && onClose(),
		},
		h(
			"div",
			{ className: "modal" },
			h(
				"div",
				{ className: "modal-header" },
				h(
					"h3",
					{ className: "modal-title" },
					I18n.t("modals.tasks.title", { position: job.position, company: job.company }),
				),
				h("button", { className: "modal-close", onclick: onClose }, "×"),
			),
			h(
				"div",
				{ className: "modal-body" },
				// Active tasks section
				...(sortedActiveTasks.length > 0
					? [
						h("h4", { 
							className: "modal-section-header"
						}, I18n.t("modals.tasks.activeSection")),
						...sortedActiveTasks.map((task) => TaskItem({ task, job }))
					]
					: [
							h(
								"p",
								{
									className: "modal-empty-message"
								},
								I18n.t("modals.tasks.emptyState"),
							),
						]),
				// Archived tasks section
				...(sortedArchivedTasks.length > 0
					? [
						h("h4", { 
							className: "modal-archived-header",
							onclick: () => {
								const archivedSection = document.getElementById('archived-tasks-content');
								const expandIcon = document.getElementById('archived-tasks-icon');
								if (archivedSection.style.display === 'none') {
									archivedSection.style.display = 'block';
									expandIcon.textContent = 'expand_less';
								} else {
									archivedSection.style.display = 'none';
									expandIcon.textContent = 'expand_more';
								}
							}
						}, 
							h('span', { className: 'material-symbols-outlined expand-icon', id: 'archived-tasks-icon' }, 'expand_less'),
							I18n.t("modals.tasks.archivedSection", { count: sortedArchivedTasks.length })
						),
						h("div", { 
							id: "archived-tasks-content"
						}, ...sortedArchivedTasks.map((task) => TaskItem({ task, job })))
					]
					: []),
				// Add task form section
				h(
					"div",
					{ className: "add-task-section" },
					h("h4", { className: "add-task-title" }, I18n.t("modals.tasks.addSection")),
					h("textarea", {
						className: "add-task-textarea",
						placeholder: I18n.t("modals.tasks.placeholder"),
						rows: 3,
						onkeydown: (e) => {
							if (e.key === "Enter" && e.shiftKey) {
								e.preventDefault();
								handleAddTask();
							}
						},
					}),
				),
			),
			h(
				"div",
				{ className: "modal-footer" },
				h(
					"button",
					{
						className: "action-btn edit-btn",
						onclick: handleAddTask,
					},
					I18n.t("modals.tasks.addButton"),
				),
				h(
					"button",
					{ className: "action-btn cancel-btn", onclick: onClose },
					I18n.t("modals.common.close"),
				),
			),
		),
	);
};

// Open unified tasks modal
const openTasksModal = (job) => {
	const modal = TasksModal({
		job,
		onClose: closeModal,
	});
	document.body.appendChild(modal);
};

// Alias for backward compatibility
const openAddTaskModal = openTasksModal;

// ============================================================================
// SRC/COMPONENTS/CONTACTS.JS
// ============================================================================

// ============================================================================
// CONTACTS SYSTEM COMPONENTS
// ============================================================================

// Contacts count display component
const ContactsCount = ({ contacts = [], onClick }) => {
	const activeContacts = contacts.filter(contact => !contact.archived);
	const count = activeContacts.length;
	const className = count === 0 ? "contacts-count zero" : "contacts-count";

	return h("span", {
		className,
		onclick: count > 0 ? onClick : null,
		textContent: count.toString(),
		title: `${count} contact${count !== 1 ? 's' : ''}${contacts.length !== count ? ` (${contacts.length - count} archived)` : ''}`
	});
};

// Individual contact item component
const ContactItem = ({ contact, job }) => {
	const isArchived = contact.archived || false;
	
	const handleArchiveToggle = () => {
		const jobIndex = jobsData.findIndex((j) => j.id === job.id);
		if (jobIndex === -1) return;
		
		const contactIndex = jobsData[jobIndex].contacts.findIndex((c) => c.id === contact.id);
		if (contactIndex === -1) return;
		
		jobsData[jobIndex].contacts[contactIndex].archived = !isArchived;
		saveToLocalStorage();
		
		// Update the contact element in place
		const contactElement = document.querySelector(`[data-contact-id="${contact.id}"]`);
		if (contactElement) {
			const newArchiveStatus = !isArchived;
			contactElement.style.opacity = newArchiveStatus ? "0.6" : "1";
			contactElement.style.filter = newArchiveStatus ? "grayscale(0.5)" : "none";
			contactElement.className = `contact-item ${newArchiveStatus ? 'archived' : ''}`;
			
			// Update archive button
			const archiveBtn = contactElement.querySelector('.archive-btn');
			if (archiveBtn) {
				archiveBtn.innerHTML = `<span class="material-symbols-outlined icon-14">${newArchiveStatus ? "unarchive" : "archive"}</span>`;
			}
		}
		
		// Update interface
		updateStats();
	};
	
	const handleEdit = () => {
		const contactInfoElement = document.querySelector(`[data-contact-id="${contact.id}"] .contact-info`);
		if (!contactInfoElement) return;
		
		// Create form fields
		const nameInput = h("input", {
			type: "text",
			className: "contact-edit-input",
			value: contact.name || "",
			placeholder: "Name"
		});
		
		const emailInput = h("input", {
			type: "email",
			className: "contact-edit-input",
			value: contact.email || "",
			placeholder: "Email"
		});
		
		const phoneInput = h("input", {
			type: "tel",
			className: "contact-edit-input",
			value: contact.phone || "",
			placeholder: "Phone"
		});
		
		const companyInput = h("input", {
			type: "text",
			className: "contact-edit-input",
			value: contact.company || "",
			placeholder: "Company"
		});
		
		const saveBtn = h("button", {
			className: "action-btn edit-btn edit-save-btn",
			textContent: I18n.t("modals.common.save"),
			onclick: () => {
				const newName = nameInput.value.trim();
				const newEmail = emailInput.value.trim();
				const newPhone = phoneInput.value.trim();
				const newCompany = companyInput.value.trim();
				
				if (!newName && !newEmail && !newPhone) return;
				
				const jobIndex = jobsData.findIndex((j) => j.id === job.id);
				if (jobIndex === -1) return;
				
				const contactIndex = jobsData[jobIndex].contacts.findIndex((c) => c.id === contact.id);
				if (contactIndex === -1) return;
				
				jobsData[jobIndex].contacts[contactIndex].name = newName;
				jobsData[jobIndex].contacts[contactIndex].email = newEmail;
				jobsData[jobIndex].contacts[contactIndex].phone = newPhone;
				jobsData[jobIndex].contacts[contactIndex].company = newCompany;
				saveToLocalStorage();
				
				// Update in place - replace form with new data
				contactInfoElement.innerHTML = "";
				contactInfoElement.appendChild(createContactDisplay(jobsData[jobIndex].contacts[contactIndex]));
				
				// Update interface
				updateStats();
			}
		});
		
		const cancelBtn = h("button", {
			className: "action-btn cancel-btn edit-cancel-btn",
			textContent: I18n.t("modals.common.cancel"),
			onclick: () => {
				// Cancel editing - restore original display
				contactInfoElement.innerHTML = "";
				contactInfoElement.appendChild(createContactDisplay(contact));
			}
		});
		
		const form = h("div", { className: "contact-edit-form" },
			h("div", { className: "contact-form-row" }, nameInput, emailInput),
			h("div", { className: "contact-form-row" }, phoneInput, companyInput),
			h("div", { className: "contact-form-actions" }, saveBtn, cancelBtn)
		);
		
		contactInfoElement.innerHTML = "";
		contactInfoElement.appendChild(form);
		nameInput.focus();
	};
	
	const createContactDisplay = (contact) => {
		return h("div", { className: "contact-display" },
			contact.name ? h("div", { className: "contact-name" }, contact.name) : null,
			contact.email ? h("div", { className: "contact-email" }, 
				h("a", { href: `mailto:${contact.email}`, className: "contact-link" }, contact.email)
			) : null,
			contact.phone ? h("div", { className: "contact-phone" }, 
				h("a", { href: `tel:${contact.phone}`, className: "contact-link" }, contact.phone)
			) : null,
			contact.company ? h("div", { className: "contact-company" }, contact.company) : null
		);
	};
	
	return h(
		"div",
		{ 
			className: `contact-item ${isArchived ? 'archived' : ''}`,
			"data-contact-id": contact.id
		},
		h(
			"div",
			{ 
				className: "contact-header"
			},
			h(
				"div",
				{ className: "modal-header-content" },
				h("span", { className: "contact-date" }, formatDate(contact.date))
			),
			h(
				"div",
				{ className: "contact-actions modal-actions-row" },
				h("button", {
					className: "action-btn edit-contact-btn icon-btn-transparent",
					title: I18n.t("modals.contacts.editTitle"),
					innerHTML: '<span class="material-symbols-outlined icon-14">edit</span>',
					onclick: handleEdit
				}),
				h("button", {
					className: "action-btn archive-btn icon-btn-transparent",
					title: isArchived ? I18n.t("modals.contacts.unarchiveTitle") : I18n.t("modals.contacts.archiveTitle"),
					innerHTML: `<span class="material-symbols-outlined icon-14">${isArchived ? "unarchive" : "archive"}</span>`,
					onclick: handleArchiveToggle
				})
			)
		),
		h("div", { 
			className: "contact-info"
		}, createContactDisplay(contact))
	);
};

// Unified modal component for viewing and adding contacts
const ContactsModal = ({ job, onClose }) => {
	const contacts = job.contacts || [];
	const activeContacts = contacts.filter(contact => !contact.archived);
	const archivedContacts = contacts.filter(contact => contact.archived);
	const sortedActiveContacts = [...activeContacts].sort(
		(a, b) => new Date(a.date) - new Date(b.date),
	);
	const sortedArchivedContacts = [...archivedContacts].sort(
		(a, b) => new Date(a.date) - new Date(b.date),
	);

	const handleAddContact = () => {
		const nameInput = document.querySelector(".add-contact-name");
		const emailInput = document.querySelector(".add-contact-email");
		const phoneInput = document.querySelector(".add-contact-phone");
		const companyInput = document.querySelector(".add-contact-company");
		
		const name = nameInput.value.trim();
		const email = emailInput.value.trim();
		const phone = phoneInput.value.trim();
		const company = companyInput.value.trim();

		if (!name && !email && !phone) {
			nameInput.focus();
			return;
		}

		const newContact = {
			id: Date.now(),
			date: new Date().toISOString(),
			name: name,
			email: email,
			phone: phone,
			company: company
		};

		// Add contact to job data
		const jobIndex = jobsData.findIndex((j) => j.id === job.id);
		if (jobIndex === -1) return;

		if (!jobsData[jobIndex].contacts) {
			jobsData[jobIndex].contacts = [];
		}

		jobsData[jobIndex].contacts.push(newContact);
		saveToLocalStorage();

		// Update the job object for this modal
		job.contacts = jobsData[jobIndex].contacts;

		// Add the new contact to the existing modal without reopening
		const modalBody = document.querySelector(".modal-body");
		const addContactSection = modalBody.querySelector(".add-contact-section");

		// Create and insert the new contact before the add contact section
		const newContactElement = ContactItem({ contact: newContact, job });
		modalBody.insertBefore(newContactElement, addContactSection);

		// Clear the inputs
		nameInput.value = "";
		emailInput.value = "";
		phoneInput.value = "";
		companyInput.value = "";

		// Update the contacts count in the table (refresh interface for count update)
		updateStats();
	};

	return h(
		"div",
		{
			className: "modal-overlay",
			onclick: (e) => e.target === e.currentTarget && onClose(),
		},
		h(
			"div",
			{ className: "modal" },
			h(
				"div",
				{ className: "modal-header" },
				h(
					"h3",
					{ className: "modal-title" },
					I18n.t("modals.contacts.title", { position: job.position, company: job.company }),
				),
				h("button", { className: "modal-close", onclick: onClose }, "×"),
			),
			h(
				"div",
				{ className: "modal-body" },
				// Active contacts section
				...(sortedActiveContacts.length > 0
					? [
						h("h4", { 
							className: "modal-section-header"
						}, I18n.t("modals.contacts.activeSection")),
						...sortedActiveContacts.map((contact) => ContactItem({ contact, job }))
					]
					: [
						h(
							"p",
							{
								className: "modal-empty-message"
							},
							I18n.t("modals.contacts.emptyState"),
						),
					]),
				// Archived contacts section
				...(sortedArchivedContacts.length > 0
					? [
						h("h4", { 
							className: "modal-archived-header",
							onclick: () => {
								const archivedSection = document.getElementById('archived-contacts-content');
								const expandIcon = document.getElementById('archived-contacts-icon');
								if (archivedSection.style.display === 'none') {
									archivedSection.style.display = 'block';
									expandIcon.textContent = 'expand_less';
								} else {
									archivedSection.style.display = 'none';
									expandIcon.textContent = 'expand_more';
								}
							}
						}, 
							h('span', { className: 'material-symbols-outlined expand-icon', id: 'archived-contacts-icon' }, 'expand_less'),
							I18n.t("modals.contacts.archivedSection", { count: sortedArchivedContacts.length })
						),
						h("div", { 
							id: "archived-contacts-content"
						}, ...sortedArchivedContacts.map((contact) => ContactItem({ contact, job })))
					]
					: []),
				// Add contact form section
				h(
					"div",
					{ className: "add-contact-section" },
					h("h4", { className: "add-contact-title" }, I18n.t("modals.contacts.addSection")),
					h("div", { className: "contact-form-grid" },
						h("input", {
							type: "text",
							className: "add-contact-name",
							placeholder: I18n.t("modals.contacts.placeholderName"),
						}),
						h("input", {
							type: "email",
							className: "add-contact-email",
							placeholder: I18n.t("modals.contacts.placeholderEmail"),
						}),
						h("input", {
							type: "tel",
							className: "add-contact-phone",
							placeholder: I18n.t("modals.contacts.placeholderPhone"),
						}),
						h("input", {
							type: "text",
							className: "add-contact-company",
							placeholder: I18n.t("modals.contacts.placeholderCompany"),
						})
					)
				)
			),
			h(
				"div",
				{ className: "modal-footer" },
				h(
					"button",
					{
						className: "action-btn edit-btn",
						onclick: handleAddContact,
					},
					I18n.t("modals.contacts.addButton"),
				),
				h(
					"button",
					{ className: "action-btn cancel-btn", onclick: onClose },
					I18n.t("modals.common.close"),
				),
			),
		),
	);
};

// ============================================================================
// CONTACTS MANAGEMENT FUNCTIONS
// ============================================================================

// Open unified contacts modal (for both viewing and adding contacts)
const openContactsModal = (job) => {
	const modal = ContactsModal({
		job,
		onClose: closeModal,
	});

	document.body.appendChild(modal);

	// Scroll to bottom to show the add contact form
	setTimeout(() => {
		const modalBody = modal.querySelector(".modal-body");
		if (modalBody) {
			modalBody.scrollTop = modalBody.scrollHeight;
		}
	}, 50);
};

// Get the latest contact for display in table
const getLatestContact = (contacts = []) => {
	const activeContacts = contacts.filter(contact => !contact.archived);
	if (activeContacts.length === 0) return null;
	
	// Sort by date and get the most recent
	const sorted = [...activeContacts].sort((a, b) => new Date(b.date) - new Date(a.date));
	return sorted[0];
};

// Format contact for table display
const formatContactForTable = (contact) => {
	if (!contact) return I18n.t("modals.contacts.noContacts");
	
	const parts = [];
	if (contact.name) parts.push(contact.name);
	if (contact.email) parts.push(contact.email);
	
	return parts.join("<br>") || I18n.t("modals.contacts.defaultContact");
};

// Make contact components and functions available globally for Vite
window.ContactsCount = ContactsCount;
window.ContactItem = ContactItem;
window.ContactsModal = ContactsModal;
window.openContactsModal = openContactsModal;
window.getLatestContact = getLatestContact;
window.formatContactForTable = formatContactForTable;

// ============================================================================
// SRC/COMPONENTS/FORM-FIELDS.JS
// ============================================================================

// ============================================================================
// FORM FIELD COMPONENTS FOR INLINE EDITING
// ============================================================================

// Input field component
const InputField = ({
    value = "",
    type = "text",
    className = "editable",
    placeholder = "",
    list = null,
}) => {
    const props = {
        className,
        type,
        value,
        placeholder,
    };
    if (list) props.list = list;
    return h("input", props);
};

// Textarea field component
const TextareaField = ({
    value = "",
    className = "editable",
    placeholder = "",
    rows = null,
}) => {
    const props = {
        className,
        placeholder,
        textContent: value,
    };
    if (rows) props.rows = rows;
    return h("textarea", props);
};

// Contact textarea component (for contact person and email)
const ContactTextarea = ({ contactPerson = "", contactEmail = "" }) => {
    const contactText = [contactPerson, contactEmail].filter(Boolean).join("\n");
    return TextareaField({
        value: contactText,
        placeholder: I18n.t("forms.placeholderNameEmail"),
        className: "editable contact-textarea",
    });
};

// Priority select component
const createPrioritySelect = (selectedPriority = "medium", disabled = false, className = "") => {
    const props = {
        className: className
    };
    
    // Only add disabled property if it's actually true
    if (disabled === true) {
        props.disabled = true;
    }
    
    return h(
        "select",
        props,
        h("option", { 
            value: "high",
            selected: selectedPriority === "high"
        }, I18n.t("priorities.high")),
        h("option", { 
            value: "medium",
            selected: selectedPriority === "medium"
        }, I18n.t("priorities.medium")),
        h("option", { 
            value: "low",
            selected: selectedPriority === "low"
        }, I18n.t("priorities.low"))
    );
};

// Phase select component
const createPhaseSelect = (selectedPhase = "wishlist", disabled = false, className = "") => {
    const props = {
        className: className
    };
    
    // Only add disabled property if it's actually true
    if (disabled === true) {
        props.disabled = true;
    }
    
    return h(
        "select",
        props,
        h("option", { 
            value: "wishlist",
            selected: selectedPhase === "wishlist"
        }, I18n.t("phases.wishlist")),
        h("option", { 
            value: "applied",
            selected: selectedPhase === "applied"
        }, I18n.t("phases.applied")),
        h("option", { 
            value: "phone_screening",
            selected: selectedPhase === "phone_screening"
        }, I18n.t("phases.phone_screening")),
        h("option", { 
            value: "interview",
            selected: selectedPhase === "interview"
        }, I18n.t("phases.interview")),
        h("option", { 
            value: "final_round",
            selected: selectedPhase === "final_round"
        }, I18n.t("phases.final_round")),
        h("option", { 
            value: "offer",
            selected: selectedPhase === "offer"
        }, I18n.t("phases.offer")),
        h("option", { 
            value: "rejected",
            selected: selectedPhase === "rejected"
        }, I18n.t("phases.rejected")),
        h("option", { 
            value: "withdrawn",
            selected: selectedPhase === "withdrawn"
        }, I18n.t("phases.withdrawn"))
    );
};

// Edit actions cell component
const EditActionsCell = ({ jobId, onSave, onCancel }) => {
    return h(
        "div",
        { className: "edit-actions" },
        h(
            "button",
            {
                className: "action-btn edit-btn",
                onclick: (e) => onSave(e.target.closest('button')),
                title: I18n.t("forms.saveChangesTitle")
            },
            h("span", { className: "material-symbols-outlined" }, "save")
        ),
        h(
            "button",
            {
                className: "action-btn cancel-btn",
                onclick: (e) => onCancel(e.target.closest('button')),
                title: I18n.t("forms.cancelEditingTitle")
            },
            h("span", { className: "material-symbols-outlined" }, "close")
        )
    );
};

// Make form field components available globally for Vite
window.InputField = InputField;
window.TextareaField = TextareaField;
window.ContactTextarea = ContactTextarea;
window.createPrioritySelect = createPrioritySelect;
window.createPhaseSelect = createPhaseSelect;
window.EditActionsCell = EditActionsCell;

// ============================================================================
// SRC/COMPONENTS/TABLE.JS
// ============================================================================

// ============================================================================
// TABLE AND JOB ROW COMPONENTS
// ============================================================================

// Priority cell component
const PriorityCell = ({ priority }) => {
	return h(
		"td",
		{ className: "priority-cell" },
		h("span", { className: `priority priority-${priority}` }),
		getPriorityText(priority)
	);
};

// Job row component
const JobRow = ({ job, onEdit, onDelete }) => {
	const row = h(
		"tr",
		{ "data-job-id": job.id },
		PriorityCell({ priority: job.priority }),
		h("td", { className: "company-name" }, job.company),
		h("td", { className: "position-name" }, job.position),
		h("td", { className: "current-phase" }, getPhaseText(job.currentPhase)),
		h("td", { className: "contact", innerHTML: `${job.contactPerson}<br>${job.contactEmail}` }),
		h("td", { className: "salary" }, job.salaryRange),
		h("td", { className: "location" }, job.location),
		h(
			"td",
			{ className: "notes" },
			NotesCount({
				notes: job.notes || [],
				onClick: () => openNotesModal(job),
			})
		),
		h(
			"td",
			{ className: "tasks" },
			TasksCount({
				tasks: job.tasks || [],
				onClick: () => openTasksModal(job),
			})
		),
		h(
			"td",
			{ className: "actions-cell" },
			h("button", {
				className: "action-btn edit-btn",
				onclick: () => onEdit(job),
				innerHTML: '<span class="material-symbols-outlined">edit</span>'
			}),
			h("button", {
				className: "action-btn delete-btn",
				onclick: () => onDelete(job),
				innerHTML: '<span class="material-symbols-outlined">delete</span>'
			})
		)
	);

	// Double-click to edit
	row.addEventListener("dblclick", () => onEdit(job));

	return row;
};

// Modal close function
const closeModal = () => {
	const modals = document.querySelectorAll(".modal-overlay");
	modals.forEach((modal) => modal.remove());
};

// ============================================================================
// SRC/APP.JS
// ============================================================================

// ============================================================================
// MAIN APPLICATION LOGIC
// ============================================================================

// Main application initialization
function initializeApp() {
	// Initialize i18n
	I18n.init();
	
	// Always set up UI structure first to prevent blinking
	updateStaticTexts();
	setupEventListeners();
	setupFilters();
	
	// Load data from localStorage
	const savedJobs = loadFromLocalStorage();
	
	if (savedJobs && savedJobs.length > 0) {
		jobsData = savedJobs;
		originalData = [...jobsData];
		refreshInterface();
	} else {
		// Show empty interface first
		refreshInterface();
		
		// Show welcome message for new users
		const showDemo = confirm(I18n.t("messages.welcome"));
		if (showDemo) {
			jobsData = getDemoData();
			originalData = [...jobsData];
			saveToLocalStorage();
			refreshInterface();
		}
	}
}

// Setup event listeners
function setupEventListeners() {
	// ESC key to close modals
	document.addEventListener("keydown", (e) => {
		if (e.key === "Escape") {
			closeModal();
		}
	});
}

// Setup filter dropdowns
function setupFilters() {
	// Priority filter
	const priorityDropdown = $("#priorityDropdown");
	if (priorityDropdown) {
		populatePriorityFilter();
	}
	
	// Phase filter
	const phaseDropdown = $("#phaseDropdown");
	if (phaseDropdown) {
		populatePhaseFilter();
	}
}

// Populate priority filter
function populatePriorityFilter() {
	const dropdown = $("#priorityDropdown").get();
	if (!dropdown) return;
	
	dropdown.innerHTML = "";
	
	// Add "All Priorities" option
	const allOption = h("div", {
		className: "dropdown-option",
		onclick: () => {
			filterByPriority(null);
			toggleDropdown('priorityDropdown');
		}
	}, I18n.t("table.filters.allPriorities"));
	dropdown.appendChild(allOption);
	
	// Add priority options
	for (const priority of PRIORITIES) {
		const option = h("div", {
			className: "dropdown-option",
			onclick: () => {
				filterByPriority(priority);
				toggleDropdown('priorityDropdown');
			}
		}, getPriorityText(priority));
		dropdown.appendChild(option);
	}
}

// Populate phase filter
function populatePhaseFilter() {
	const dropdown = $("#phaseDropdown").get();
	if (!dropdown) return;
	
	dropdown.innerHTML = "";
	
	// Add "All Phases" option
	const allOption = h("div", {
		className: "dropdown-option",
		onclick: () => {
			filterByPhase(null);
			toggleDropdown('phaseDropdown');
		}
	}, I18n.t("table.filters.allPhases"));
	dropdown.appendChild(allOption);
	
	// Add phase options
	for (const phase of PHASES) {
		const option = h("div", {
			className: "dropdown-option",
			onclick: () => {
				filterByPhase(phase);
				toggleDropdown('phaseDropdown');
			}
		}, getPhaseText(phase));
		dropdown.appendChild(option);
	}
}

// Filter functions
function filterByPriority(priority) {
	if (priority === null) {
		jobsData = [...originalData];
	} else {
		jobsData = originalData.filter(job => job.priority === priority);
	}
	refreshInterface();
}

function filterByPhase(phase) {
	if (phase === null) {
		jobsData = [...originalData];
	} else {
		jobsData = originalData.filter(job => job.currentPhase === phase);
	}
	refreshInterface();
}

// Update statistics
function updateStats(filteredJobs = null) {
	const jobs = filteredJobs || jobsData;
	let total = jobs.length;
	let active = 0;
	let interviews = 0;
	let offers = 0;
	let rejections = 0;

	for (const job of jobs) {
		const phase = job.currentPhase;
		if (phase !== "rejected" && phase !== "withdrawn") active++;
		if (phase === "interview" || phase === "final_round") interviews++;
		if (phase === "offer") offers++;
		if (phase === "rejected") rejections++;
	}

	$("#totalApps").text(total.toString());
	$("#activeApps").text(active.toString());
	$("#interviews").text(interviews.toString());
	$("#offers").text(offers.toString());
	$("#rejections").text(rejections.toString());
}

// Refresh the interface
function refreshInterface() {
	updateStats();
	renderJobTable();
}

// Render job table
function renderJobTable() {
	const tableBody = $("#jobTableBody");
	if (!tableBody) {
		console.warn("Table body not found - cannot render jobs");
		return;
	}
	
	const tbody = tableBody.get();
	tbody.innerHTML = "";
	
	console.log("Rendering jobs:", jobsData.length);
	
	for (const job of jobsData) {
		try {
			const row = JobRow({
				job,
				onEdit: editJob,
				onDelete: deleteJob
			});
			tbody.appendChild(row);
		} catch (error) {
			console.error("Error rendering job row:", error, job);
		}
	}
}

// Edit job function - transforms row into inline edit mode
function editJob(job) {
	const row = document.querySelector(`tr[data-job-id="${job.id}"]`);
	if (!row || row.classList.contains("editing")) return;
	
	// Mark row as editing
	row.classList.add("editing");
	
	// Store original HTML to restore on cancel
	const originalHTML = row.innerHTML;
	
	// Get unique values for autocomplete
	const companies = [...new Set(jobsData.map(j => j.company).filter(Boolean))];
	const positions = [...new Set(jobsData.map(j => j.position).filter(Boolean))];
	const locations = [...new Set(jobsData.map(j => j.location).filter(Boolean))];
	
	// Build inline edit row
	row.innerHTML = `
		<td class="priority-cell">
			<select class="inline-edit priority-select" data-field="priority">
				<option value="high" ${job.priority === "high" ? "selected" : ""}>${I18n.t("priorities.high")}</option>
				<option value="medium" ${job.priority === "medium" ? "selected" : ""}>${I18n.t("priorities.medium")}</option>
				<option value="low" ${job.priority === "low" ? "selected" : ""}>${I18n.t("priorities.low")}</option>
			</select>
		</td>
		<td>
			<input type="text" class="inline-edit" data-field="company" value="${job.company || ""}" 
				list="company-list-${job.id}" placeholder="${I18n.t("table.placeholders.company")}">
			<datalist id="company-list-${job.id}">
				${companies.map(c => `<option value="${c}">`).join("")}
			</datalist>
		</td>
		<td>
			<input type="text" class="inline-edit" data-field="position" value="${job.position || ""}" 
				list="position-list-${job.id}" placeholder="${I18n.t("table.placeholders.position")}">
			<datalist id="position-list-${job.id}">
				${positions.map(p => `<option value="${p}">`).join("")}
			</datalist>
		</td>
		<td>
			<select class="inline-edit phase-select" data-field="currentPhase">
				${PHASES.map(phase => 
					`<option value="${phase}" ${job.currentPhase === phase ? "selected" : ""}>${getPhaseText(phase)}</option>`
				).join("")}
			</select>
		</td>
		<td>
			<input type="text" class="inline-edit" data-field="contactPerson" value="${job.contactPerson || ""}" 
				placeholder="${I18n.t("table.placeholders.contactPerson")}">
			<input type="email" class="inline-edit" data-field="contactEmail" value="${job.contactEmail || ""}" 
				placeholder="${I18n.t("table.placeholders.contactEmail")}" style="margin-top: 4px;">
		</td>
		<td>
			<input type="text" class="inline-edit" data-field="salaryRange" value="${job.salaryRange || ""}" 
				placeholder="${I18n.t("table.placeholders.salaryRange")}">
		</td>
		<td>
			<input type="text" class="inline-edit" data-field="location" value="${job.location || ""}" 
				list="location-list-${job.id}" placeholder="${I18n.t("table.placeholders.location")}">
			<datalist id="location-list-${job.id}">
				${locations.map(l => `<option value="${l}">`).join("")}
			</datalist>
		</td>
		<td class="notes" data-job-id="${job.id}">
			${NotesCount({
				notes: job.notes || [],
				onClick: null, // Will be attached after rendering
			}).outerHTML}
		</td>
		<td class="tasks" data-job-id="${job.id}">
			${TasksCount({
				tasks: job.tasks || [],
				onClick: null, // Will be attached after rendering
			}).outerHTML}
		</td>
		<td class="actions-cell">
			<button class="action-btn save-btn" onclick="saveInlineEdit(${job.id})">
				<span class="material-symbols-outlined">check</span>
			</button>
			<button class="action-btn cancel-btn" onclick="cancelInlineEdit(${job.id}, '${btoa(originalHTML)}')">
				<span class="material-symbols-outlined">close</span>
			</button>
		</td>
	`;
	
	// Focus first input
	const firstInput = row.querySelector('input[data-field="company"]');
	if (firstInput) firstInput.focus();
	
	// Attach click handlers for notes and tasks
	const notesCell = row.querySelector('.notes .notes-count');
	const tasksCell = row.querySelector('.tasks .tasks-count');
	
	if (notesCell) {
		notesCell.addEventListener('click', () => openNotesModal(job));
	}
	
	if (tasksCell) {
		tasksCell.addEventListener('click', () => openTasksModal(job));
	}
	
	// Handle Enter key to save, Escape to cancel
	row.addEventListener("keydown", (e) => {
		if (e.key === "Enter") {
			e.preventDefault();
			saveInlineEdit(job.id);
		} else if (e.key === "Escape") {
			e.preventDefault();
			cancelInlineEdit(job.id, btoa(originalHTML));
		}
	});
}

// Save inline edit
function saveInlineEdit(jobId) {
	const row = document.querySelector(`tr[data-job-id="${jobId}"]`);
	if (!row) return;
	
	const job = jobsData.find(j => j.id === jobId);
	if (!job) return;
	
	// Collect all edited values
	row.querySelectorAll(".inline-edit").forEach(input => {
		const field = input.dataset.field;
		const value = input.value.trim();
		job[field] = value;
	});
	
	// Save and refresh
	saveToLocalStorage();
	refreshInterface();
}

// Cancel inline edit
function cancelInlineEdit(jobId, originalHTMLBase64) {
	const row = document.querySelector(`tr[data-job-id="${jobId}"]`);
	if (!row) return;
	
	// Find the job
	const job = jobsData.find(j => j.id === jobId);
	if (!job) return;
	
	// Check if this is an empty job (new job with no meaningful data)
	const isEmpty = !job.company.trim() && 
					!job.position.trim() && 
					!job.contactPerson.trim() && 
					!job.contactEmail.trim() && 
					!job.salaryRange.trim() && 
					!job.location.trim();
	
	if (isEmpty) {
		// Remove the empty job from data
		const index = jobsData.findIndex(j => j.id === jobId);
		if (index !== -1) {
			jobsData.splice(index, 1);
			originalData = [...jobsData];
			saveToLocalStorage();
			refreshInterface();
		}
	} else {
		// Instead of restoring HTML (which loses event listeners),
		// we'll refresh the interface to properly recreate the row
		row.classList.remove("editing");
		refreshInterface();
	}
}

// Delete job function  
function deleteJob(job) {
	const confirmed = confirm(
		I18n.t("messages.confirmDelete", {
			position: job.position,
			company: job.company
		})
	);
	
	if (confirmed) {
		const index = jobsData.findIndex(j => j.id === job.id);
		if (index !== -1) {
			jobsData.splice(index, 1);
			originalData = [...jobsData];
			saveToLocalStorage();
			refreshInterface();
		}
	}
}

// Global functions for HTML onclick handlers
function addRow() {
	// Create new job with unique ID
	const newJob = {
		id: Date.now(),
		priority: "medium",
		company: "",
		position: "",
		appliedDate: new Date().toISOString(),
		currentPhase: "wishlist",
		contactPerson: "",
		contactEmail: "",
		salaryRange: "",
		location: "",
		notes: [],
		tasks: []
	};
	
	jobsData.push(newJob);
	originalData = [...jobsData];
	saveToLocalStorage();
	refreshInterface();
	
	// Auto-edit the new row
	setTimeout(() => editJob(newJob), 100);
}

function toggleDropdown(dropdownId) {
	const dropdown = document.getElementById(dropdownId);
	if (!dropdown) return;
	
	// Close all other dropdowns
	document.querySelectorAll('.filter-dropdown').forEach(d => {
		if (d.id !== dropdownId) {
			d.style.display = 'none';
		}
	});
	
	// Toggle this dropdown
	dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
}

function switchTab(tabName) {
	document.querySelectorAll('.tab-button').forEach(btn => {
		btn.classList.remove('active');
	});
	document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');
	
	document.querySelectorAll('.tab-content').forEach(content => {
		content.classList.remove('active');
	});
	document.getElementById(`${tabName}Tab`).classList.add('active');
	
	if (tabName === 'kanban') {
		populateKanbanBoard();
	}
}

// Kanban board population (placeholder)
function populateKanbanBoard() {
	// This would populate the kanban board
	console.log("Populating kanban board");
}

// Initialize app when DOM is ready
if (document.readyState === "loading") {
	document.addEventListener("DOMContentLoaded", initializeApp);
} else {
	initializeApp();
}
    </script>
</body>
</html>